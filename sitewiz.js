!function(e){"use strict";function t(){for(var e="sitewizsession=",t=decodeURIComponent(document.cookie).split(";"),n=0;n<t.length;n++){for(var r=t[n];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(e))return[r.substring(15,r.length),!0]}var o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));return function(e,t,n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var o="expires="+r.toUTCString();document.cookie="".concat(e,"=").concat(t,";").concat(o,";path=/")}("sitewizsession",o,1),[o,!1]}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=d(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function i(){i=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),s=new N(r||[]);return o(i,"_invoke",{value:O(e,n,s)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",h="suspendedYield",m="executing",v="completed",y={};function g(){}function b(){}function S(){}var w={};l(w,s,(function(){return this}));var k=Object.getPrototypeOf,I=k&&k(k(R([])));I&&I!==n&&r.call(I,s)&&(w=I);var M=S.prototype=g.prototype=Object.create(w);function C(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,s){var u=f(e[o],e,a);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(l).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,s)}))}s(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,n,r){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var u=E(s,r);if(u){if(u===y)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var c=f(t,n,r);if("normal"===c.type){if(o=r.done?v:h,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=v,r.method="throw",r.arg=c.arg)}}}function E(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=f(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(typeof t+" is not iterable")}return b.prototype=S,o(M,"constructor",{value:S,configurable:!0}),o(S,"constructor",{value:b,configurable:!0}),b.displayName=l(S,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,l(e,c,"GeneratorFunction")),e.prototype=Object.create(M),e},t.awrap=function(e){return{__await:e}},C(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(d(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(M),l(M,c,"Generator"),l(M,s,(function(){return this})),l(M,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;L(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return s}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function d(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}var f;function p(e){var t=null==e?void 0:e.host;return Boolean((null==t?void 0:t.shadowRoot)===e)}function h(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function m(e){try{var t=e.rules||e.cssRules;return t?((n=Array.from(t,v).join("")).includes(" background-clip: text;")&&!n.includes(" -webkit-background-clip: text;")&&(n=n.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),n):null}catch(e){return null}var n}function v(e){var t,n,r;if(function(e){return"styleSheet"in e}(e))try{t=m(e.styleSheet)||function(e){var t=e.cssText;if(t.split('"').length<3)return t;var n=["@import","url(".concat(JSON.stringify(e.href),")")];return""===e.layerName?n.push("layer"):e.layerName&&n.push("layer(".concat(e.layerName,")")),e.supportsText&&n.push("supports(".concat(e.supportsText,")")),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if(function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":"))return n=e.cssText,r=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,n.replace(r,"$1\\$2");return t||e.cssText}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(f||(f={}));var y=function(){return o((function e(){r(this,e),this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}),[{key:"getId",value:function(e){var t;if(!e)return-1;var n=null===(t=this.getMeta(e))||void 0===t?void 0:t.id;return null!=n?n:-1}},{key:"getNode",value:function(e){return this.idNodeMap.get(e)||null}},{key:"getIds",value:function(){return Array.from(this.idNodeMap.keys())}},{key:"getMeta",value:function(e){return this.nodeMetaMap.get(e)||null}},{key:"removeNodeFromMap",value:function(e){var t=this,n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))}},{key:"has",value:function(e){return this.idNodeMap.has(e)}},{key:"hasNode",value:function(e){return this.nodeMetaMap.has(e)}},{key:"add",value:function(e,t){var n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}},{key:"replace",value:function(e,t){var n=this.getNode(e);if(n){var r=this.nodeMetaMap.get(n);r&&this.nodeMetaMap.set(t,r)}this.idNodeMap.set(e,t)}},{key:"reset",value:function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}])}();function g(e){var t=e.element,n=e.maskInputOptions,r=e.tagName,o=e.type,a=e.value,i=e.maskInputFn,s=a||"",u=o&&b(o);return(n[r.toLowerCase()]||u&&n[u])&&(s=i?i(s,t):"*".repeat(s.length)),s}function b(e){return e.toLowerCase()}var S="__rrweb_original__";function w(e){var t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?b(t):null}function k(e,t){var n,r;try{r=new URL(e,null!=t?t:window.location.href)}catch(e){return null}var o=r.pathname.match(/\.([0-9a-z]+)(?:$)/i);return null!==(n=null==o?void 0:o[1])&&void 0!==n?n:null}var I,M,C=1,x=new RegExp("[^a-z0-9-_:]"),O=-2;function E(){return C++}var T=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,L=/^(?:[a-z+]+:)?\/\//i,N=/^www\..*/i,R=/^(data:)([^,]*),(.*)/i;function D(e,t){return(e||"").replace(T,(function(e,n,r,o,i,s){var u,c=r||i||s,l=n||o||"";if(!c)return e;if(L.test(c)||N.test(c))return"url(".concat(l).concat(c).concat(l,")");if(R.test(c))return"url(".concat(l).concat(c).concat(l,")");if("/"===c[0])return"url(".concat(l).concat((u=t,(u.indexOf("//")>-1?u.split("/").slice(0,3).join("/"):u.split("/")[0]).split("?")[0]+c)).concat(l,")");var d=t.split("/"),f=c.split("/");d.pop();var p,h=a(f);try{for(h.s();!(p=h.n()).done;){var m=p.value;"."!==m&&(".."===m?d.pop():d.push(m))}}catch(e){h.e(e)}finally{h.f()}return"url(".concat(l).concat(d.join("/")).concat(l,")")}))}var _=/^[^ \t\n\r\u000c]+/,A=/^[, \t\n\r\u000c]+/;function F(e,t){if(!t||""===t.trim())return t;var n=e.createElement("a");return n.href=t,n.href}function P(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function j(){var e=document.createElement("a");return e.href="",e.href}function U(e,t,n,r){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?F(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;var n=0;function r(e){var r,o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}for(var o=[];r(A),!(n>=t.length);){var a=r(_);if(","===a.slice(-1))a=F(e,a.substring(0,a.length-1)),o.push(a);else{var i="";a=F(e,a);for(var s=!1;;){var u=t.charAt(n);if(""===u){o.push((a+i).trim());break}if(s)")"===u&&(s=!1);else{if(","===u){n+=1,o.push((a+i).trim());break}"("===u&&(s=!0)}i+=u,n+=1}}}return o.join(", ")}(e,r):"style"===n?D(r,j()):"object"===t&&"data"===n?F(e,r):r:F(e,r):r}function W(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function B(e,t,n){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!n&&B(e.parentNode,t,n);for(var r=e.classList.length;r--;){var o=e.classList[r];if(t.test(o))return!0}return!!n&&B(e.parentNode,t,n)}function z(e,t,n,r){try{var o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===o)return!1;if("string"==typeof t){if(r){if(o.closest(".".concat(t)))return!0}else if(o.classList.contains(t))return!0}else if(B(o,t,r))return!0;if(n)if(r){if(o.closest(n))return!0}else if(o.matches(n))return!0}catch(e){}return!1}function G(e,t){var n=t.doc,r=t.mirror,o=t.blockClass,a=t.blockSelector,i=t.needsMask,s=t.inlineStylesheet,u=t.maskInputOptions,c=void 0===u?{}:u,l=t.maskTextFn,d=t.maskInputFn,p=t.dataURLOptions,h=void 0===p?{}:p,v=t.inlineImages,y=t.recordCanvas,k=t.keepIframeSrcFn,C=t.newlyAddedElement,O=void 0!==C&&C,E=function(e,t){if(!t.hasNode(e))return;var n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:f.Document,childNodes:[],compatMode:e.compatMode}:{type:f.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:f.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:E};case e.ELEMENT_NODE:return function(e,t){for(var n,r=t.doc,o=t.blockClass,a=t.blockSelector,i=t.inlineStylesheet,s=t.maskInputOptions,u=void 0===s?{}:s,c=t.maskInputFn,l=t.dataURLOptions,d=void 0===l?{}:l,p=t.inlineImages,h=t.recordCanvas,v=t.keepIframeSrcFn,y=t.newlyAddedElement,k=void 0!==y&&y,C=t.rootId,O=function(e,t,n){try{if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var r=e.classList.length;r--;){var o=e.classList[r];if(t.test(o))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,o,a),E=function(e){if(e instanceof HTMLFormElement)return"form";var t=b(e.tagName);return x.test(t)?"div":t}(e),T={},L=e.attributes.length,N=0;N<L;N++){var R=e.attributes[N];W(E,R.name,R.value)||(T[R.name]=U(r,E,b(R.name),R.value))}if("link"===E&&i){var _=Array.from(r.styleSheets).find((function(t){return t.href===e.href})),A=null;_&&(A=m(_)),A&&(delete T.rel,delete T.href,T._cssText=D(A,_.href))}if("style"===E&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){var F=m(e.sheet);F&&(T._cssText=D(F,j()))}if("input"===E||"textarea"===E||"select"===E){var B=e.value,z=e.checked;"radio"!==T.type&&"checkbox"!==T.type&&"submit"!==T.type&&"button"!==T.type&&B?T.value=g({element:e,type:w(e),tagName:E,value:B,maskInputOptions:u,maskInputFn:c}):z&&(T.checked=z)}"option"===E&&(e.selected&&!u.select?T.selected=!0:delete T.selected);if("canvas"===E&&h)if("2d"===e.__context)(function(e){var t=e.getContext("2d");if(!t)return!0;for(var n=0;n<e.width;n+=50)for(var r=0;r<e.height;r+=50){var o=t.getImageData,a=S in o?o[S]:o;if(new Uint32Array(a.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((function(e){return 0!==e})))return!1}return!0})(e)||(T.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){var G=e.toDataURL(d.type,d.quality),H=document.createElement("canvas");H.width=e.width,H.height=e.height,G!==H.toDataURL(d.type,d.quality)&&(T.rr_dataURL=G)}if("img"===E&&p){I||(I=r.createElement("canvas"),M=I.getContext("2d"));var V=e,q=V.crossOrigin;V.crossOrigin="anonymous";var K=function(){V.removeEventListener("load",K);try{I.width=V.naturalWidth,I.height=V.naturalHeight,M.drawImage(V,0,0),T.rr_dataURL=I.toDataURL(d.type,d.quality)}catch(e){console.warn("Cannot inline img src=".concat(V.currentSrc,"! Error: ").concat(e))}q?T.crossOrigin=q:V.removeAttribute("crossorigin")};V.complete&&0!==V.naturalWidth?K():V.addEventListener("load",K)}if("audio"===E||"video"===E){var X=T;X.rr_mediaState=e.paused?"paused":"played",X.rr_mediaCurrentTime=e.currentTime,X.rr_mediaPlaybackRate=e.playbackRate,X.rr_mediaMuted=e.muted,X.rr_mediaLoop=e.loop,X.rr_mediaVolume=e.volume}k||(e.scrollLeft&&(T.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(T.rr_scrollTop=e.scrollTop));if(O){var $=e.getBoundingClientRect(),J=$.width,Y=$.height;T={class:T.class,rr_width:"".concat(J,"px"),rr_height:"".concat(Y,"px")}}"iframe"!==E||v(T.src)||(e.contentDocument||(T.rr_src=T.src),delete T.src);try{customElements.get(E)&&(n=!0)}catch(e){}return{type:f.Element,tagName:E,attributes:T,childNodes:[],isSVG:P(e)||void 0,needBlock:O,rootId:C,isCustom:n}}(e,{doc:n,blockClass:o,blockSelector:a,inlineStylesheet:s,maskInputOptions:c,maskInputFn:d,dataURLOptions:h,inlineImages:v,recordCanvas:y,keepIframeSrcFn:k,newlyAddedElement:O,rootId:E});case e.TEXT_NODE:return function(e,t){var n,r=t.needsMask,o=t.maskTextFn,a=t.rootId,i=e.parentNode&&e.parentNode.tagName,s=e.textContent,u="STYLE"===i||void 0,c="SCRIPT"===i||void 0;if(u&&s){try{e.nextSibling||e.previousSibling||(null===(n=e.parentNode.sheet)||void 0===n?void 0:n.cssRules)&&(s=m(e.parentNode.sheet))}catch(t){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(t),e)}s=D(s,j())}c&&(s="SCRIPT_PLACEHOLDER");!u&&!c&&s&&r&&(s=o?o(s,e.parentElement):s.replace(/[\S]/g,"*"));return{type:f.Text,textContent:s||"",isStyle:u,rootId:a}}(e,{needsMask:i,maskTextFn:l,rootId:E});case e.CDATA_SECTION_NODE:return{type:f.CDATA,textContent:"",rootId:E};case e.COMMENT_NODE:return{type:f.Comment,textContent:e.textContent||"",rootId:E};default:return!1}}function H(e){return null==e?"":e.toLowerCase()}function V(e,t){var n=t.doc,r=t.mirror,o=t.blockClass,a=t.blockSelector,i=t.maskTextClass,s=t.maskTextSelector,u=t.skipChild,c=void 0!==u&&u,l=t.inlineStylesheet,d=void 0===l||l,m=t.maskInputOptions,v=void 0===m?{}:m,y=t.maskTextFn,g=t.maskInputFn,b=t.slimDOMOptions,S=t.dataURLOptions,w=void 0===S?{}:S,I=t.inlineImages,M=void 0!==I&&I,C=t.recordCanvas,x=void 0!==C&&C,T=t.onSerialize,L=t.onIframeLoad,N=t.iframeLoadTimeout,R=void 0===N?5e3:N,D=t.onStylesheetLoad,_=t.stylesheetLoadTimeout,A=void 0===_?5e3:_,F=t.keepIframeSrcFn,P=void 0===F?function(){return!1}:F,j=t.newlyAddedElement,U=void 0!==j&&j,W=t.needsMask,B=t.preserveWhiteSpace,q=void 0===B||B;!W&&e.childNodes&&(W=z(e,i,s,void 0===W));var K,X=G(e,{doc:n,mirror:r,blockClass:o,blockSelector:a,needsMask:W,inlineStylesheet:d,maskInputOptions:v,maskTextFn:y,maskInputFn:g,dataURLOptions:w,inlineImages:M,recordCanvas:x,keepIframeSrcFn:P,newlyAddedElement:U});if(!X)return console.warn(e,"not serialized"),null;K=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===f.Comment)return!0;if(e.type===f.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===k(e.attributes.href)))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(H(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===H(e.attributes.name)||"icon"===H(e.attributes.rel)||"apple-touch-icon"===H(e.attributes.rel)||"shortcut icon"===H(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&H(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(H(e.attributes.property).match(/^(og|twitter|fb):/)||H(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===H(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===H(e.attributes.name)||"googlebot"===H(e.attributes.name)||"bingbot"===H(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===H(e.attributes.name)||"generator"===H(e.attributes.name)||"framework"===H(e.attributes.name)||"publisher"===H(e.attributes.name)||"progid"===H(e.attributes.name)||H(e.attributes.property).match(/^article:/)||H(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===H(e.attributes.name)||"yandex-verification"===H(e.attributes.name)||"csrf-token"===H(e.attributes.name)||"p:domain_verify"===H(e.attributes.name)||"verify-v1"===H(e.attributes.name)||"verification"===H(e.attributes.name)||"shopify-checkout-api-token"===H(e.attributes.name)))return!0}}return!1}(X,b)&&(q||X.type!==f.Text||X.isStyle||X.textContent.replace(/^\s+|\s+$/gm,"").length)?E():O;var $=Object.assign(X,{id:K});if(r.add(e,$),K===O)return null;T&&T(e);var J=!c;if($.type===f.Element){J=J&&!$.needBlock,delete $.needBlock;var Y=e.shadowRoot;Y&&h(Y)&&($.isShadowHost=!0)}if(($.type===f.Document||$.type===f.Element)&&J){b.headWhitespace&&$.type===f.Element&&"head"===$.tagName&&(q=!1);var Z={doc:n,mirror:r,blockClass:o,blockSelector:a,needsMask:W,maskTextClass:i,maskTextSelector:s,skipChild:c,inlineStylesheet:d,maskInputOptions:v,maskTextFn:y,maskInputFn:g,slimDOMOptions:b,dataURLOptions:w,inlineImages:M,recordCanvas:x,preserveWhiteSpace:q,onSerialize:T,onIframeLoad:L,iframeLoadTimeout:R,onStylesheetLoad:D,stylesheetLoadTimeout:A,keepIframeSrcFn:P};if($.type===f.Element&&"textarea"===$.tagName&&void 0!==$.attributes.value);else for(var Q=0,ee=Array.from(e.childNodes);Q<ee.length;Q++){var te=V(ee[Q],Z);te&&$.childNodes.push(te)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(var ne=0,re=Array.from(e.shadowRoot.childNodes);ne<re.length;ne++){var oe=V(re[ne],Z);oe&&(h(e.shadowRoot)&&(oe.isShadow=!0),$.childNodes.push(oe))}}return e.parentNode&&p(e.parentNode)&&h(e.parentNode)&&($.isShadow=!0),$.type===f.Element&&"iframe"===$.tagName&&function(e,t,n){var r=e.contentWindow;if(r){var o,a=!1;try{o=r.document.readyState}catch(e){return}if("complete"===o){var i="about:blank";if(r.location.href!==i||e.src===i||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}else{var s=setTimeout((function(){a||(t(),a=!0)}),n);e.addEventListener("load",(function(){clearTimeout(s),a=!0,t()}))}}}(e,(function(){var t=e.contentDocument;if(t&&L){var n=V(t,{doc:t,mirror:r,blockClass:o,blockSelector:a,needsMask:W,maskTextClass:i,maskTextSelector:s,skipChild:!1,inlineStylesheet:d,maskInputOptions:v,maskTextFn:y,maskInputFn:g,slimDOMOptions:b,dataURLOptions:w,inlineImages:M,recordCanvas:x,preserveWhiteSpace:q,onSerialize:T,onIframeLoad:L,iframeLoadTimeout:R,onStylesheetLoad:D,stylesheetLoadTimeout:A,keepIframeSrcFn:P});n&&L(e,n)}}),R),$.type===f.Element&&"link"===$.tagName&&"string"==typeof $.attributes.rel&&("stylesheet"===$.attributes.rel||"preload"===$.attributes.rel&&"string"==typeof $.attributes.href&&"css"===k($.attributes.href))&&function(e,t,n){var r,o=!1;try{r=e.sheet}catch(e){return}if(!r){var a=setTimeout((function(){o||(t(),o=!0)}),n);e.addEventListener("load",(function(){clearTimeout(a),o=!0,t()}))}}(e,(function(){if(D){var t=V(e,{doc:n,mirror:r,blockClass:o,blockSelector:a,needsMask:W,maskTextClass:i,maskTextSelector:s,skipChild:!1,inlineStylesheet:d,maskInputOptions:v,maskTextFn:y,maskInputFn:g,slimDOMOptions:b,dataURLOptions:w,inlineImages:M,recordCanvas:x,preserveWhiteSpace:q,onSerialize:T,onIframeLoad:L,iframeLoadTimeout:R,onStylesheetLoad:D,stylesheetLoadTimeout:A,keepIframeSrcFn:P});t&&D(e,t)}}),A),$}function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,r={capture:!0,passive:!0};return n.addEventListener(e,t,r),function(){return n.removeEventListener(e,t,r)}}var K="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",X={map:{},getId:function(){return console.error(K),-1},getNode:function(){return console.error(K),null},removeNodeFromMap:function(){console.error(K)},has:function(){return console.error(K),!1},reset:function(){console.error(K)}};function $(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null,o=0;return function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];var u=Date.now();o||!1!==n.leading||(o=u);var c=t-(u-o),l=this;c<=0||c>t?(r&&(clearTimeout(r),r=null),o=u,e.apply(l,i)):r||!1===n.trailing||(r=setTimeout((function(){o=!1===n.leading?0:Date.now(),r=null,e.apply(l,i)}),c))}}function J(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window,a=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set:function(e){var t=this;setTimeout((function(){n.set.call(t,e)}),0),a&&a.set&&a.set.call(this,e)}}),function(){return J(e,t,a||{},!0)}}function Y(e,t,n){try{if(!(t in e))return function(){};var r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,function(){e[t]=r}}catch(e){return function(){}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(X=new Proxy(X,{get:function(e,t,n){return"map"===t&&console.error(K),Reflect.get(e,t,n)}}));var Z=Date.now;function Q(e){var t,n,r,o,a,i,s=e.document;return{left:s.scrollingElement?s.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:(null==s?void 0:s.documentElement.scrollLeft)||(null===(n=null===(t=null==s?void 0:s.body)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.scrollLeft)||(null===(r=null==s?void 0:s.body)||void 0===r?void 0:r.scrollLeft)||0,top:s.scrollingElement?s.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==s?void 0:s.documentElement.scrollTop)||(null===(a=null===(o=null==s?void 0:s.body)||void 0===o?void 0:o.parentElement)||void 0===a?void 0:a.scrollTop)||(null===(i=null==s?void 0:s.body)||void 0===i?void 0:i.scrollTop)||0}}function ee(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function te(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function ne(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}function re(e,t,n,r){if(!e)return!1;var o=ne(e);if(!o)return!1;try{if("string"==typeof t){if(o.classList.contains(t))return!0;if(r&&null!==o.closest("."+t))return!0}else if(B(o,t,r))return!0}catch(e){}if(n){if(o.matches(n))return!0;if(r&&null!==o.closest(n))return!0}return!1}function oe(e,t){return t.getId(e)===O}function ae(e,t){if(p(e))return!1;var n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||ae(e.parentNode,t))}function ie(e){return Boolean(e.changedTouches)}function se(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function ue(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function ce(e){return Boolean(null==e?void 0:e.shadowRoot)}/[1-9][0-9]{12}/.test(Date.now().toString())||(Z=function(){return(new Date).getTime()});var le=function(){return o((function e(){r(this,e),this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}),[{key:"getId",value:function(e){var t;return null!==(t=this.styleIDMap.get(e))&&void 0!==t?t:-1}},{key:"has",value:function(e){return this.styleIDMap.has(e)}},{key:"add",value:function(e,t){return this.has(e)?this.getId(e):(n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n);var n}},{key:"getStyle",value:function(e){return this.idStyleMap.get(e)||null}},{key:"reset",value:function(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}},{key:"generateId",value:function(){return this.id++}}])}();function de(e){var t,n,r=null;return(null===(n=null===(t=e.getRootNode)||void 0===t?void 0:t.call(e))||void 0===n?void 0:n.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(r=e.getRootNode().host),r}function fe(e){var t=e.ownerDocument;if(!t)return!1;var n=function(e){for(var t,n=e;t=de(n);)n=t;return n}(e);return t.contains(n)}function pe(e){var t=e.ownerDocument;return!!t&&(t.contains(e)||fe(e))}var he=function(e){return e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e}(he||{}),me=function(e){return e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e}(me||{}),ve=function(e){return e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e}(ve||{}),ye=function(e){return e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e}(ye||{}),ge=function(e){return e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e}(ge||{});function be(e){return"__ln"in e}var Se,we=function(){return o((function e(){r(this,e),this.length=0,this.head=null,this.tail=null}),[{key:"get",value:function(e){if(e>=this.length)throw new Error("Position outside of list range");for(var t=this.head,n=0;n<e;n++)t=(null==t?void 0:t.next)||null;return t}},{key:"addNode",value:function(e){var t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&be(e.previousSibling)){var n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&be(e.nextSibling)&&e.nextSibling.__ln.previous){var r=e.nextSibling.__ln.previous;t.previous=r,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,r&&(r.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}},{key:"removeNode",value:function(e){var t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}])}(),ke=function(e,t){return"".concat(e,"@").concat(t)},Ie=function(){return o((function e(){var t=this;r(this,e),this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=function(e){e.forEach(t.processMutation),t.emit()},this.emit=function(){if(!t.frozen&&!t.locked){for(var e=[],n=new Set,r=new we,o=function(e){for(var n=e,r=O;r===O;)r=(n=n&&n.nextSibling)&&t.mirror.getId(n);return r},i=function(a){if(a.parentNode&&pe(a)&&"TEXTAREA"!==a.parentNode.tagName){var i=p(a.parentNode)?t.mirror.getId(de(a)):t.mirror.getId(a.parentNode),s=o(a);if(-1===i||-1===s)return r.addNode(a);var u=V(a,{doc:t.doc,mirror:t.mirror,blockClass:t.blockClass,blockSelector:t.blockSelector,maskTextClass:t.maskTextClass,maskTextSelector:t.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:t.inlineStylesheet,maskInputOptions:t.maskInputOptions,maskTextFn:t.maskTextFn,maskInputFn:t.maskInputFn,slimDOMOptions:t.slimDOMOptions,dataURLOptions:t.dataURLOptions,recordCanvas:t.recordCanvas,inlineImages:t.inlineImages,onSerialize:function(e){se(e,t.mirror)&&t.iframeManager.addIframe(e),ue(e,t.mirror)&&t.stylesheetManager.trackLinkElement(e),ce(a)&&t.shadowDomManager.addShadowRoot(a.shadowRoot,t.doc)},onIframeLoad:function(e,n){t.iframeManager.attachIframe(e,n),t.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:function(e,n){t.stylesheetManager.attachLinkElement(e,n)}});u&&(e.push({parentId:i,nextId:s,node:u}),n.add(u.id))}};t.mapRemoves.length;)t.mirror.removeNodeFromMap(t.mapRemoves.shift());var s,u=a(t.movedSet);try{for(u.s();!(s=u.n()).done;){var c=s.value;Ce(t.removes,c,t.mirror)&&!t.movedSet.has(c.parentNode)||i(c)}}catch(e){u.e(e)}finally{u.f()}var l,d=a(t.addedSet);try{for(d.s();!(l=d.n()).done;){var f=l.value;Oe(t.droppedSet,f)||Ce(t.removes,f,t.mirror)?Oe(t.movedSet,f)?i(f):t.droppedSet.add(f):i(f)}}catch(e){d.e(e)}finally{d.f()}for(var h=null;r.length;){var m=null;if(h){var v=t.mirror.getId(h.value.parentNode),y=o(h.value);-1!==v&&-1!==y&&(m=h)}if(!m)for(var g=r.tail;g;){var b=g;if(g=g.previous,b){var S=t.mirror.getId(b.value.parentNode);if(-1===o(b.value))continue;if(-1!==S){m=b;break}var w=b.value;if(w.parentNode&&w.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var k=w.parentNode.host;if(-1!==t.mirror.getId(k)){m=b;break}}}}if(!m){for(;r.head;)r.removeNode(r.head.value);break}h=m.previous,r.removeNode(m.value),i(m.value)}var I={texts:t.texts.map((function(e){var n=e.node;return n.parentNode&&"TEXTAREA"===n.parentNode.tagName&&t.genTextAreaValueMutation(n.parentNode),{id:t.mirror.getId(n),value:e.value}})).filter((function(e){return!n.has(e.id)})).filter((function(e){return t.mirror.has(e.id)})),attributes:t.attributes.map((function(e){var n=e.attributes;if("string"==typeof n.style){var r=JSON.stringify(e.styleDiff),o=JSON.stringify(e._unchangedStyles);r.length<n.style.length&&(r+o).split("var(").length===n.style.split("var(").length&&(n.style=e.styleDiff)}return{id:t.mirror.getId(e.node),attributes:n}})).filter((function(e){return!n.has(e.id)})).filter((function(e){return t.mirror.has(e.id)})),removes:t.removes,adds:e};(I.texts.length||I.attributes.length||I.removes.length||I.adds.length)&&(t.texts=[],t.attributes=[],t.attributeMap=new WeakMap,t.removes=[],t.addedSet=new Set,t.movedSet=new Set,t.droppedSet=new Set,t.movedMap={},t.mutationCb(I))}},this.genTextAreaValueMutation=function(e){var n=t.attributeMap.get(e);n||(n={node:e,attributes:{},styleDiff:{},_unchangedStyles:{}},t.attributes.push(n),t.attributeMap.set(e,n)),n.attributes.value=Array.from(e.childNodes,(function(e){return e.textContent||""})).join("")},this.processMutation=function(e){if(!oe(e.target,t.mirror))switch(e.type){case"characterData":var n=e.target.textContent;re(e.target,t.blockClass,t.blockSelector,!1)||n===e.oldValue||t.texts.push({value:z(e.target,t.maskTextClass,t.maskTextSelector,!0)&&n?t.maskTextFn?t.maskTextFn(n,ne(e.target)):n.replace(/[\S]/g,"*"):n,node:e.target});break;case"attributes":var r=e.target,o=e.attributeName,a=e.target.getAttribute(o);if("value"===o){var i=w(r);a=g({element:r,maskInputOptions:t.maskInputOptions,tagName:r.tagName,type:i,value:a,maskInputFn:t.maskInputFn})}if(re(e.target,t.blockClass,t.blockSelector,!1)||a===e.oldValue)return;var s=t.attributeMap.get(e.target);if("IFRAME"===r.tagName&&"src"===o&&!t.keepIframeSrcFn(a)){if(r.contentDocument)return;o="rr_src"}if(s||(s={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},t.attributes.push(s),t.attributeMap.set(e.target,s)),"type"===o&&"INPUT"===r.tagName&&"password"===(e.oldValue||"").toLowerCase()&&r.setAttribute("data-rr-is-password","true"),!W(r.tagName,o)&&(s.attributes[o]=U(t.doc,b(r.tagName),b(o),a),"style"===o)){if(!t.unattachedDoc)try{t.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){t.unattachedDoc=t.doc}var u=t.unattachedDoc.createElement("span");e.oldValue&&u.setAttribute("style",e.oldValue);for(var c=0,l=Array.from(r.style);c<l.length;c++){var d=l[c],f=r.style.getPropertyValue(d),m=r.style.getPropertyPriority(d);f!==u.style.getPropertyValue(d)||m!==u.style.getPropertyPriority(d)?s.styleDiff[d]=""===m?f:[f,m]:s._unchangedStyles[d]=[f,m]}for(var v=0,y=Array.from(u.style);v<y.length;v++){var S=y[v];""===r.style.getPropertyValue(S)&&(s.styleDiff[S]=!1)}}break;case"childList":if(re(e.target,t.blockClass,t.blockSelector,!0))return;if("TEXTAREA"===e.target.tagName)return void t.genTextAreaValueMutation(e.target);e.addedNodes.forEach((function(n){return t.genAdds(n,e.target)})),e.removedNodes.forEach((function(n){var r=t.mirror.getId(n),o=p(e.target)?t.mirror.getId(e.target.host):t.mirror.getId(e.target);re(e.target,t.blockClass,t.blockSelector,!1)||oe(n,t.mirror)||!function(e,t){return-1!==t.getId(e)}(n,t.mirror)||(t.addedSet.has(n)?(Me(t.addedSet,n),t.droppedSet.add(n)):t.addedSet.has(e.target)&&-1===r||ae(e.target,t.mirror)||(t.movedSet.has(n)&&t.movedMap[ke(r,o)]?Me(t.movedSet,n):t.removes.push({parentId:o,id:r,isShadow:!(!p(e.target)||!h(e.target))||void 0})),t.mapRemoves.push(n))}))}},this.genAdds=function(e,n){if(!t.processedNodeManager.inOtherBuffer(e,t)&&!t.addedSet.has(e)&&!t.movedSet.has(e)){if(t.mirror.hasNode(e)){if(oe(e,t.mirror))return;t.movedSet.add(e);var r=null;n&&t.mirror.hasNode(n)&&(r=t.mirror.getId(n)),r&&-1!==r&&(t.movedMap[ke(t.mirror.getId(e),r)]=!0)}else t.addedSet.add(e),t.droppedSet.delete(e);re(e,t.blockClass,t.blockSelector,!1)||(e.childNodes.forEach((function(e){return t.genAdds(e)})),ce(e)&&e.shadowRoot.childNodes.forEach((function(n){t.processedNodeManager.add(n,t),t.genAdds(n,e)})))}}}),[{key:"init",value:function(e){var t=this;["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((function(n){t[n]=e[n]}))}},{key:"freeze",value:function(){this.frozen=!0,this.canvasManager.freeze()}},{key:"unfreeze",value:function(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}},{key:"isFrozen",value:function(){return this.frozen}},{key:"lock",value:function(){this.locked=!0,this.canvasManager.lock()}},{key:"unlock",value:function(){this.locked=!1,this.canvasManager.unlock(),this.emit()}},{key:"reset",value:function(){this.shadowDomManager.reset(),this.canvasManager.reset()}}])}();function Me(e,t){e.delete(t),t.childNodes.forEach((function(t){return Me(e,t)}))}function Ce(e,t,n){return 0!==e.length&&xe(e,t,n)}function xe(e,t,n){var r=t.parentNode;if(!r)return!1;var o=n.getId(r);return!!e.some((function(e){return e.id===o}))||xe(e,r,n)}function Oe(e,t){return 0!==e.size&&Ee(e,t)}function Ee(e,t){var n=t.parentNode;return!!n&&(!!e.has(n)||Ee(e,n))}function Te(e){Se=e}function Le(){Se=void 0}var Ne=function(e){if(!Se)return e;return function(){try{return e.apply(void 0,arguments)}catch(e){if(Se&&!0===Se(e))return;throw e}}},Re=[];function De(e){try{if("composedPath"in e){var t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function _e(e,t){var n,r,o=new Ie;Re.push(o),o.init(e);var a=window.MutationObserver||window.__rrMutationObserver,i=null===(r=null===(n=null===window||void 0===window?void 0:window.Zone)||void 0===n?void 0:n.__symbol__)||void 0===r?void 0:r.call(n,"MutationObserver");i&&window[i]&&(a=window[i]);var s=new a(Ne(o.processMutations.bind(o)));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function Ae(e){var t=e.mouseInteractionCb,n=e.doc,r=e.mirror,o=e.blockClass,a=e.blockSelector,i=e.sampling;if(!1===i.mouseInteraction)return function(){};var s=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,u=[],c=null;return Object.keys(ve).filter((function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==s[e]})).forEach((function(e){var i=b(e),s=function(e){return function(n){var i=De(n);if(!re(i,o,a,!0)){var s=null,u=e;if("pointerType"in n){switch(n.pointerType){case"mouse":s=ye.Mouse;break;case"touch":s=ye.Touch;break;case"pen":s=ye.Pen}s===ye.Touch?ve[e]===ve.MouseDown?u="TouchStart":ve[e]===ve.MouseUp&&(u="TouchEnd"):ye.Pen}else ie(n)&&(s=ye.Touch);null!==s?(c=s,(u.startsWith("Touch")&&s===ye.Touch||u.startsWith("Mouse")&&s===ye.Mouse)&&(s=null)):ve[e]===ve.Click&&(s=c,c=null);var l=ie(n)?n.changedTouches[0]:n;if(l){var d=r.getId(i),f=l.clientX,p=l.clientY;Ne(t)(Object.assign({type:ve[u],id:d,x:f,y:p},null!==s&&{pointerType:s}))}}}}(e);if(window.PointerEvent)switch(ve[e]){case ve.MouseDown:case ve.MouseUp:i=i.replace("mouse","pointer");break;case ve.TouchStart:case ve.TouchEnd:return}u.push(q(i,s,n))})),Ne((function(){u.forEach((function(e){return e()}))}))}function Fe(e){var t=e.scrollCb,n=e.doc,r=e.mirror,o=e.blockClass,a=e.blockSelector,i=e.sampling;return q("scroll",Ne($(Ne((function(e){var i=De(e);if(i&&!re(i,o,a,!0)){var s=r.getId(i);if(i===n&&n.defaultView){var u=Q(n.defaultView);t({id:s,x:u.left,y:u.top})}else t({id:s,x:i.scrollLeft,y:i.scrollTop})}})),i.scroll||100)),n)}var Pe=["INPUT","TEXTAREA","SELECT"],je=new WeakMap;function Ue(e){return function(e,t){if(Ge("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||Ge("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||Ge("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||Ge("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){var n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){var r=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(r)}return t}(e,[])}function We(e,t,n){var r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function Be(e,t){var n,r,o,a=e.mirror,i=e.stylesheetManager,s=null;s="#document"===t.nodeName?a.getId(t):a.getId(t.host);var u="#document"===t.nodeName?null===(n=t.defaultView)||void 0===n?void 0:n.Document:null===(o=null===(r=t.ownerDocument)||void 0===r?void 0:r.defaultView)||void 0===o?void 0:o.ShadowRoot,c=(null==u?void 0:u.prototype)?Object.getOwnPropertyDescriptor(null==u?void 0:u.prototype,"adoptedStyleSheets"):void 0;return null!==s&&-1!==s&&u&&c?(Object.defineProperty(t,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get:function(){var e;return null===(e=c.get)||void 0===e?void 0:e.call(this)},set:function(e){var t,n=null===(t=c.set)||void 0===t?void 0:t.call(this,e);if(null!==s&&-1!==s)try{i.adoptStyleSheets(e,s)}catch(e){}return n}}),Ne((function(){Object.defineProperty(t,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get:c.get,set:c.set})}))):function(){}}function ze(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.doc.defaultView;if(!r)return function(){};!function(e,t){var n=e.mutationCb,r=e.mousemoveCb,o=e.mouseInteractionCb,a=e.scrollCb,i=e.viewportResizeCb,s=e.inputCb,u=e.mediaInteractionCb,c=e.styleSheetRuleCb,l=e.styleDeclarationCb,d=e.canvasMutationCb,f=e.fontCb,p=e.selectionCb,h=e.customElementCb;e.mutationCb=function(){t.mutation&&t.mutation.apply(t,arguments),n.apply(void 0,arguments)},e.mousemoveCb=function(){t.mousemove&&t.mousemove.apply(t,arguments),r.apply(void 0,arguments)},e.mouseInteractionCb=function(){t.mouseInteraction&&t.mouseInteraction.apply(t,arguments),o.apply(void 0,arguments)},e.scrollCb=function(){t.scroll&&t.scroll.apply(t,arguments),a.apply(void 0,arguments)},e.viewportResizeCb=function(){t.viewportResize&&t.viewportResize.apply(t,arguments),i.apply(void 0,arguments)},e.inputCb=function(){t.input&&t.input.apply(t,arguments),s.apply(void 0,arguments)},e.mediaInteractionCb=function(){t.mediaInteaction&&t.mediaInteaction.apply(t,arguments),u.apply(void 0,arguments)},e.styleSheetRuleCb=function(){t.styleSheetRule&&t.styleSheetRule.apply(t,arguments),c.apply(void 0,arguments)},e.styleDeclarationCb=function(){t.styleDeclaration&&t.styleDeclaration.apply(t,arguments),l.apply(void 0,arguments)},e.canvasMutationCb=function(){t.canvasMutation&&t.canvasMutation.apply(t,arguments),d.apply(void 0,arguments)},e.fontCb=function(){t.font&&t.font.apply(t,arguments),f.apply(void 0,arguments)},e.selectionCb=function(){t.selection&&t.selection.apply(t,arguments),p.apply(void 0,arguments)},e.customElementCb=function(){t.customElement&&t.customElement.apply(t,arguments),h.apply(void 0,arguments)}}(e,n),e.recordDOM&&(t=_e(e,e.doc));var o,i,c,l,d,f=function(e){var t=e.mousemoveCb,n=e.sampling,r=e.doc,o=e.mirror;if(!1===n.mousemove)return function(){};var a,i="number"==typeof n.mousemove?n.mousemove:50,s="number"==typeof n.mousemoveCallback?n.mousemoveCallback:500,u=[],c=$(Ne((function(e){var n=Date.now()-a;t(u.map((function(e){return e.timeOffset-=n,e})),e),u=[],a=null})),s),l=Ne($(Ne((function(e){var t=De(e),n=ie(e)?e.changedTouches[0]:e,r=n.clientX,i=n.clientY;a||(a=Z()),u.push({x:r,y:i,id:o.getId(t),timeOffset:Z()-a}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?me.Drag:e instanceof MouseEvent?me.MouseMove:me.TouchMove)})),i,{trailing:!1})),d=[q("mousemove",l,r),q("touchmove",l,r),q("drag",l,r)];return Ne((function(){d.forEach((function(e){return e()}))}))}(e),p=Ae(e),h=Fe(e),m=(o={win:r},i=e.viewportResizeCb,c=o.win,l=-1,d=-1,q("resize",Ne($(Ne((function(){var e=ee(),t=te();l===e&&d===t||(i({width:Number(t),height:Number(e)}),l=e,d=t)})),200)),c)),v=function(e){var t=e.inputCb,n=e.doc,r=e.mirror,o=e.blockClass,a=e.blockSelector,i=e.ignoreClass,s=e.ignoreSelector,c=e.maskInputOptions,l=e.maskInputFn,d=e.sampling,f=e.userTriggeredOnInput;function p(e){var t=De(e),r=e.isTrusted,u=t&&t.tagName;if(t&&"OPTION"===u&&(t=t.parentElement),t&&u&&!(Pe.indexOf(u)<0)&&!re(t,o,a,!0)&&!(t.classList.contains(i)||s&&t.matches(s))){var d=t.value,p=!1,m=w(t)||"";"radio"===m||"checkbox"===m?p=t.checked:(c[u.toLowerCase()]||c[m])&&(d=g({element:t,maskInputOptions:c,tagName:u,type:m,value:d,maskInputFn:l})),h(t,f?{text:d,isChecked:p,userTriggered:r}:{text:d,isChecked:p});var v=t.name;"radio"===m&&v&&p&&n.querySelectorAll('input[type="radio"][name="'.concat(v,'"]')).forEach((function(e){if(e!==t){var n=e.value;h(e,f?{text:n,isChecked:!p,userTriggered:!1}:{text:n,isChecked:!p})}}))}}function h(e,n){var o=je.get(e);if(!o||o.text!==n.text||o.isChecked!==n.isChecked){je.set(e,n);var a=r.getId(e);Ne(t)(Object.assign(Object.assign({},n),{id:a}))}}var m=("last"===d.input?["change"]:["input","change"]).map((function(e){return q(e,Ne(p),n)})),v=n.defaultView;if(!v)return function(){m.forEach((function(e){return e()}))};var y=v.Object.getOwnPropertyDescriptor(v.HTMLInputElement.prototype,"value"),b=[[v.HTMLInputElement.prototype,"value"],[v.HTMLInputElement.prototype,"checked"],[v.HTMLSelectElement.prototype,"value"],[v.HTMLTextAreaElement.prototype,"value"],[v.HTMLSelectElement.prototype,"selectedIndex"],[v.HTMLOptionElement.prototype,"selected"]];return y&&y.set&&m.push.apply(m,u(b.map((function(e){return J(e[0],e[1],{set:function(){Ne(p)({target:this,isTrusted:!1})}},!1,v)})))),Ne((function(){m.forEach((function(e){return e()}))}))}(e),y=function(e){var t=e.mediaInteractionCb,n=e.blockClass,r=e.blockSelector,o=e.mirror,a=e.sampling,i=e.doc,s=Ne((function(e){return $(Ne((function(a){var i=De(a);if(i&&!re(i,n,r,!0)){var s=i.currentTime,u=i.volume,c=i.muted,l=i.playbackRate,d=i.loop;t({type:e,id:o.getId(i),currentTime:s,volume:u,muted:c,playbackRate:l,loop:d})}})),a.media||500)})),u=[q("play",s(0),i),q("pause",s(1),i),q("seeked",s(2),i),q("volumechange",s(3),i),q("ratechange",s(4),i)];return Ne((function(){u.forEach((function(e){return e()}))}))}(e),b=function(){},S=function(){},k=function(){},I=function(){};e.recordDOM&&(b=function(e,t){var n=e.styleSheetRuleCb,r=e.mirror,o=e.stylesheetManager,a=t.win;if(!a.CSSStyleSheet||!a.CSSStyleSheet.prototype)return function(){};var i=a.CSSStyleSheet.prototype.insertRule;a.CSSStyleSheet.prototype.insertRule=new Proxy(i,{apply:Ne((function(e,t,a){var i=s(a,2),u=i[0],c=i[1],l=We(t,r,o.styleMirror),d=l.id,f=l.styleId;return(d&&-1!==d||f&&-1!==f)&&n({id:d,styleId:f,adds:[{rule:u,index:c}]}),e.apply(t,a)}))});var c,l,d=a.CSSStyleSheet.prototype.deleteRule;a.CSSStyleSheet.prototype.deleteRule=new Proxy(d,{apply:Ne((function(e,t,a){var i=s(a,1)[0],u=We(t,r,o.styleMirror),c=u.id,l=u.styleId;return(c&&-1!==c||l&&-1!==l)&&n({id:c,styleId:l,removes:[{index:i}]}),e.apply(t,a)}))}),a.CSSStyleSheet.prototype.replace&&(c=a.CSSStyleSheet.prototype.replace,a.CSSStyleSheet.prototype.replace=new Proxy(c,{apply:Ne((function(e,t,a){var i=s(a,1)[0],u=We(t,r,o.styleMirror),c=u.id,l=u.styleId;return(c&&-1!==c||l&&-1!==l)&&n({id:c,styleId:l,replace:i}),e.apply(t,a)}))})),a.CSSStyleSheet.prototype.replaceSync&&(l=a.CSSStyleSheet.prototype.replaceSync,a.CSSStyleSheet.prototype.replaceSync=new Proxy(l,{apply:Ne((function(e,t,a){var i=s(a,1)[0],u=We(t,r,o.styleMirror),c=u.id,l=u.styleId;return(c&&-1!==c||l&&-1!==l)&&n({id:c,styleId:l,replaceSync:i}),e.apply(t,a)}))}));var f={};He("CSSGroupingRule")?f.CSSGroupingRule=a.CSSGroupingRule:(He("CSSMediaRule")&&(f.CSSMediaRule=a.CSSMediaRule),He("CSSConditionRule")&&(f.CSSConditionRule=a.CSSConditionRule),He("CSSSupportsRule")&&(f.CSSSupportsRule=a.CSSSupportsRule));var p={};return Object.entries(f).forEach((function(e){var t=s(e,2),a=t[0],i=t[1];p[a]={insertRule:i.prototype.insertRule,deleteRule:i.prototype.deleteRule},i.prototype.insertRule=new Proxy(p[a].insertRule,{apply:Ne((function(e,t,a){var i=s(a,2),c=i[0],l=i[1],d=We(t.parentStyleSheet,r,o.styleMirror),f=d.id,p=d.styleId;return(f&&-1!==f||p&&-1!==p)&&n({id:f,styleId:p,adds:[{rule:c,index:[].concat(u(Ue(t)),[l||0])}]}),e.apply(t,a)}))}),i.prototype.deleteRule=new Proxy(p[a].deleteRule,{apply:Ne((function(e,t,a){var i=s(a,1)[0],c=We(t.parentStyleSheet,r,o.styleMirror),l=c.id,d=c.styleId;return(l&&-1!==l||d&&-1!==d)&&n({id:l,styleId:d,removes:[{index:[].concat(u(Ue(t)),[i])}]}),e.apply(t,a)}))})})),Ne((function(){a.CSSStyleSheet.prototype.insertRule=i,a.CSSStyleSheet.prototype.deleteRule=d,c&&(a.CSSStyleSheet.prototype.replace=c),l&&(a.CSSStyleSheet.prototype.replaceSync=l),Object.entries(f).forEach((function(e){var t=s(e,2),n=t[0],r=t[1];r.prototype.insertRule=p[n].insertRule,r.prototype.deleteRule=p[n].deleteRule}))}))}(e,{win:r}),S=Be(e,e.doc),k=function(e,t){var n=e.styleDeclarationCb,r=e.mirror,o=e.ignoreCSSAttributes,a=e.stylesheetManager,i=t.win,u=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(u,{apply:Ne((function(e,t,i){var c,l=s(i,3),d=l[0],f=l[1],p=l[2];if(o.has(d))return u.apply(t,[d,f,p]);var h=We(null===(c=t.parentRule)||void 0===c?void 0:c.parentStyleSheet,r,a.styleMirror),m=h.id,v=h.styleId;return(m&&-1!==m||v&&-1!==v)&&n({id:m,styleId:v,set:{property:d,value:f,priority:p},index:Ue(t.parentRule)}),e.apply(t,i)}))});var c=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(c,{apply:Ne((function(e,t,i){var u,l=s(i,1)[0];if(o.has(l))return c.apply(t,[l]);var d=We(null===(u=t.parentRule)||void 0===u?void 0:u.parentStyleSheet,r,a.styleMirror),f=d.id,p=d.styleId;return(f&&-1!==f||p&&-1!==p)&&n({id:f,styleId:p,remove:{property:l},index:Ue(t.parentRule)}),e.apply(t,i)}))}),Ne((function(){i.CSSStyleDeclaration.prototype.setProperty=u,i.CSSStyleDeclaration.prototype.removeProperty=c}))}(e,{win:r}),e.collectFonts&&(I=function(e){var t=e.fontCb,n=e.doc,r=n.defaultView;if(!r)return function(){};var o=[],a=new WeakMap,i=r.FontFace;r.FontFace=function(e,t,n){var r=new i(e,t,n);return a.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};var s=Y(n.fonts,"add",(function(e){return function(n){return setTimeout(Ne((function(){var e=a.get(n);e&&(t(e),a.delete(n))})),0),e.apply(this,[n])}}));return o.push((function(){r.FontFace=i})),o.push(s),Ne((function(){o.forEach((function(e){return e()}))}))}(e)));var M,C=function(e){var t=e.doc,n=e.mirror,r=e.blockClass,o=e.blockSelector,a=e.selectionCb,i=!0,s=Ne((function(){var e=t.getSelection();if(!(!e||i&&(null==e?void 0:e.isCollapsed))){i=e.isCollapsed||!1;for(var s=[],u=e.rangeCount||0,c=0;c<u;c++){var l=e.getRangeAt(c),d=l.startContainer,f=l.startOffset,p=l.endContainer,h=l.endOffset;re(d,r,o,!0)||re(p,r,o,!0)||s.push({start:n.getId(d),startOffset:f,end:n.getId(p),endOffset:h})}a({ranges:s})}}));return s(),q("selectionchange",s)}(e),x=function(e){var t=e.doc,n=e.customElementCb,r=t.defaultView;return r&&r.customElements?Y(r.customElements,"define",(function(e){return function(t,r,o){try{n({define:{name:t}})}catch(e){console.warn("Custom element callback failed for ".concat(t))}return e.apply(this,[t,r,o])}})):function(){}}(e),O=[],E=a(e.plugins);try{for(E.s();!(M=E.n()).done;){var T=M.value;O.push(T.observer(T.callback,r,T.options))}}catch(e){E.e(e)}finally{E.f()}return Ne((function(){Re.forEach((function(e){return e.reset()})),null==t||t.disconnect(),f(),p(),h(),m(),v(),y(),b(),S(),k(),I(),C(),x(),O.forEach((function(e){return e()}))}))}function Ge(e){return void 0!==window[e]}function He(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}var Ve=function(){return o((function e(t){r(this,e),this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}),[{key:"getId",value:function(e,t,n,r){var o=n||this.getIdToRemoteIdMap(e),a=r||this.getRemoteIdToIdMap(e),i=o.get(t);return i||(i=this.generateIdFn(),o.set(t,i),a.set(i,t)),i}},{key:"getIds",value:function(e,t){var n=this,r=this.getIdToRemoteIdMap(e),o=this.getRemoteIdToIdMap(e);return t.map((function(t){return n.getId(e,t,r,o)}))}},{key:"getRemoteId",value:function(e,t,n){var r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;var o=r.get(t);return o||-1}},{key:"getRemoteIds",value:function(e,t){var n=this,r=this.getRemoteIdToIdMap(e);return t.map((function(t){return n.getRemoteId(e,t,r)}))}},{key:"reset",value:function(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}},{key:"getIdToRemoteIdMap",value:function(e){var t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}},{key:"getRemoteIdToIdMap",value:function(e){var t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}])}(),qe=function(){return o((function e(t){r(this,e),this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Ve(E),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Ve(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}),[{key:"addIframe",value:function(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}},{key:"addLoadListener",value:function(e){this.loadListener=e}},{key:"attachIframe",value:function(e,t){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(n=this.loadListener)||void 0===n||n.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}},{key:"handleMessage",value:function(e){var t=e;if("rrweb"===t.data.type&&t.origin===t.data.origin&&e.source){var n=this.crossOriginIframeMap.get(e.source);if(n){var r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}}}},{key:"transformCrossOriginEvent",value:function(e,t){var n,r=this;switch(t.type){case he.FullSnapshot:this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);var o=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,o),this.patchRootIdOnNode(t.data.node,o),{timestamp:t.timestamp,type:he.IncrementalSnapshot,data:{source:me.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case he.Meta:case he.Load:case he.DomContentLoaded:return!1;case he.Plugin:return t;case he.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case he.IncrementalSnapshot:switch(t.data.source){case me.Mutation:return t.data.adds.forEach((function(t){r.replaceIds(t,e,["parentId","nextId","previousId"]),r.replaceIdOnNode(t.node,e);var n=r.crossOriginIframeRootIdMap.get(e);n&&r.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((function(t){r.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((function(t){r.replaceIds(t,e,["id"])})),t.data.texts.forEach((function(t){r.replaceIds(t,e,["id"])})),t;case me.Drag:case me.TouchMove:case me.MouseMove:return t.data.positions.forEach((function(t){r.replaceIds(t,e,["id"])})),t;case me.ViewportResize:return!1;case me.MediaInteraction:case me.MouseInteraction:case me.Scroll:case me.CanvasMutation:case me.Input:return this.replaceIds(t.data,e,["id"]),t;case me.StyleSheetRule:case me.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case me.Font:return t;case me.Selection:return t.data.ranges.forEach((function(t){r.replaceIds(t,e,["start","end"])})),t;case me.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null===(n=t.data.styles)||void 0===n||n.forEach((function(t){r.replaceStyleIds(t,e,["styleId"])})),t}}return!1}},{key:"replace",value:function(e,t,n,r){var o,i=a(r);try{for(i.s();!(o=i.n()).done;){var s=o.value;(Array.isArray(t[s])||"number"==typeof t[s])&&(Array.isArray(t[s])?t[s]=e.getIds(n,t[s]):t[s]=e.getId(n,t[s]))}}catch(e){i.e(e)}finally{i.f()}return t}},{key:"replaceIds",value:function(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}},{key:"replaceStyleIds",value:function(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}},{key:"replaceIdOnNode",value:function(e,t){var n=this;this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((function(e){n.replaceIdOnNode(e,t)}))}},{key:"patchRootIdOnNode",value:function(e,t){var n=this;e.type===f.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((function(e){n.patchRootIdOnNode(e,t)}))}}])}(),Ke=function(){return o((function e(t){r(this,e),this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}),[{key:"init",value:function(){this.reset(),this.patchAttachShadow(Element,document)}},{key:"addShadowRoot",value:function(e,t){var n=this;if(h(e)&&!this.shadowDoms.has(e)){this.shadowDoms.add(e);var r=_e(Object.assign(Object.assign({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push((function(){return r.disconnect()})),this.restoreHandlers.push(Fe(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout((function(){e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&n.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,n.mirror.getId(e.host)),n.restoreHandlers.push(Be({mirror:n.mirror,stylesheetManager:n.bypassOptions.stylesheetManager},e))}),0)}}},{key:"observeAttachShadow",value:function(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}},{key:"patchAttachShadow",value:function(e,t){var n=this;this.restoreHandlers.push(Y(e.prototype,"attachShadow",(function(e){return function(r){var o=e.call(this,r);return this.shadowRoot&&pe(this)&&n.addShadowRoot(this.shadowRoot,t),o}})))}},{key:"reset",value:function(){this.restoreHandlers.forEach((function(e){try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}])}();function Xe(e,t,n,r){return new(n||(n=Promise))((function(t,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function i(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,i)}s((r=r.apply(e,[])).next())}))}for(var $e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Je="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Ye=0;Ye<64;Ye++)Je[$e.charCodeAt(Ye)]=Ye;var Ze=new Map;var Qe=function(e,t,n){if(e&&(nt(e,t)||"object"===l(e))){var r=function(e,t){var n=Ze.get(e);return n||(n=new Map,Ze.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name),o=r.indexOf(e);return-1===o&&(o=r.length,r.push(e)),o}};function et(e,t,n){if(e instanceof Array)return e.map((function(e){return et(e,t,n)}));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){var r=e.constructor.name,o=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=$e[n[t]>>2],o+=$e[(3&n[t])<<4|n[t+1]>>4],o+=$e[(15&n[t+1])<<2|n[t+2]>>6],o+=$e[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e);return{rr_type:r,base64:o}}if(e instanceof DataView)return{rr_type:e.constructor.name,args:[et(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement)return{rr_type:e.constructor.name,src:e.src};if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}return e instanceof ImageData?{rr_type:e.constructor.name,args:[et(e.data,t,n),e.width,e.height]}:nt(e,t)||"object"===l(e)?{rr_type:e.constructor.name,index:Qe(e,t,n)}:e}var tt=function(e,t,n){return e.map((function(e){return et(e,t,n)}))},nt=function(e,t){var n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((function(e){return"function"==typeof t[e]}));return Boolean(n.find((function(n){return e instanceof t[n]})))};function rt(e,t,n,r){var o=[];try{var a=Y(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(o){for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];if(!re(this,t,n,!0)){var u=function(e){return"experimental-webgl"===e?"webgl":e}(o);if("__context"in this||(this.__context=u),r&&["webgl","webgl2"].includes(u))if(i[0]&&"object"===l(i[0])){var c=i[0];c.preserveDrawingBuffer||(c.preserveDrawingBuffer=!0)}else i.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[o].concat(i))}}));o.push(a)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return function(){o.forEach((function(e){return e()}))}}function ot(e,t,n,r,o,i,s){var u,c=[],l=a(Object.getOwnPropertyNames(e));try{var d=function(){var a=u.value;if(["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(a))return 0;try{if("function"!=typeof e[a])return 0;var i=Y(e,a,(function(e){return function(){for(var i=arguments.length,u=new Array(i),c=0;c<i;c++)u[c]=arguments[c];var l=e.apply(this,u);if(Qe(l,s,this),"tagName"in this.canvas&&!re(this.canvas,r,o,!0)){var d=tt(u,s,this),f={type:t,property:a,args:d};n(this.canvas,f)}return l}}));c.push(i)}catch(r){var l=J(e,a,{set:function(e){n(this.canvas,{type:t,property:a,args:[e],setter:!0})}});c.push(l)}};for(l.s();!(u=l.n()).done;)d()}catch(e){l.e(e)}finally{l.f()}return c}var at,it,st,ut,ct,lt,dt=(at=function(){!function(){
/*! *****************************************************************************
        Copyright (c) Microsoft Corporation.
          Permission to use, copy, modify, and/or distribute this software for any
        purpose with or without fee is hereby granted.
          THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
        REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
        AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
        INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
        LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
        OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
        PERFORMANCE OF THIS SOFTWARE.
        ***************************************************************************** */
function e(e,t,n,r){return new(n||(n=Promise))((function(t,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function i(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,i)}s((r=r.apply(e,[])).next())}))}for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="undefined"==typeof Uint8Array?[]:new Uint8Array(256),r=0;r<64;r++)n[t.charCodeAt(r)]=r;var o=function(e){var n,r=new Uint8Array(e),o=r.length,a="";for(n=0;n<o;n+=3)a+=t[r[n]>>2],a+=t[(3&r[n])<<4|r[n+1]>>4],a+=t[(15&r[n+1])<<2|r[n+2]>>6],a+=t[63&r[n+2]];return o%3==2?a=a.substring(0,a.length-1)+"=":o%3==1&&(a=a.substring(0,a.length-2)+"=="),a},a=new Map,s=new Map;function u(t,n,r){return e(this,0,void 0,i().mark((function e(){var a,u,c,l,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="".concat(t,"-").concat(n),!("OffscreenCanvas"in globalThis)){e.next=17;break}if(!s.has(a)){e.next=4;break}return e.abrupt("return",s.get(a));case 4:return(u=new OffscreenCanvas(t,n)).getContext("2d"),e.next=8,u.convertToBlob(r);case 8:return c=e.sent,e.next=11,c.arrayBuffer();case 11:return l=e.sent,d=o(l),s.set(a,d),e.abrupt("return",d);case 17:return e.abrupt("return","");case 18:case"end":return e.stop()}}),e)})))}var c=self;c.onmessage=function(t){return e(this,0,void 0,i().mark((function e(){var n,r,s,l,d,f,p,h,m,v,y,g;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("OffscreenCanvas"in globalThis)){e.next=31;break}return n=t.data,r=n.id,s=n.bitmap,l=n.width,d=n.height,f=n.dataURLOptions,p=u(l,d,f),(h=new OffscreenCanvas(l,d)).getContext("2d").drawImage(s,0,0),s.close(),e.next=9,h.convertToBlob(f);case 9:return m=e.sent,v=m.type,e.next=13,m.arrayBuffer();case 13:if(y=e.sent,g=o(y),e.t0=!a.has(r),!e.t0){e.next=22;break}return e.next=19,p;case 19:e.t1=e.sent,e.t2=g,e.t0=e.t1===e.t2;case 22:if(!e.t0){e.next=25;break}return a.set(r,g),e.abrupt("return",c.postMessage({id:r}));case 25:if(a.get(r)!==g){e.next=27;break}return e.abrupt("return",c.postMessage({id:r}));case 27:c.postMessage({id:r,type:v,base64:g,width:l,height:d}),a.set(r,g),e.next=32;break;case 31:return e.abrupt("return",c.postMessage({id:t.data.id}));case 32:case"end":return e.stop()}}),e)})))}}()},it=null,function(e){return st=st||function(e,t){var n=function(e,t){var n=void 0===t?null:t,r=e.toString().split("\n");r.pop(),r.shift();for(var o=r[0].search(/\S/),a=/(['"])__worker_loader_strict__(['"])/g,i=0,s=r.length;i<s;++i)r[i]=r[i].substring(o).replace(a,"$1use strict$2")+"\n";return n&&r.push("//# sourceMappingURL="+n+"\n"),r}(e,t),r=new Blob(n,{type:"application/javascript"});return URL.createObjectURL(r)}(at,it),new Worker(st,e)}),ft=function(){return o((function e(t){var n=this;r(this,e),this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=function(e,t){!(n.rafStamps.invokeId&&n.rafStamps.latestId!==n.rafStamps.invokeId)&&n.rafStamps.invokeId||(n.rafStamps.invokeId=n.rafStamps.latestId),n.pendingCanvasMutations.has(e)||n.pendingCanvasMutations.set(e,[]),n.pendingCanvasMutations.get(e).push(t)};var o=t.sampling,a=void 0===o?"all":o,i=t.win,s=t.blockClass,u=t.blockSelector,c=t.recordCanvas,l=t.dataURLOptions;this.mutationCb=t.mutationCb,this.mirror=t.mirror,c&&"all"===a&&this.initCanvasMutationObserver(i,s,u),c&&"number"==typeof a&&this.initCanvasFPSObserver(a,i,s,u,{dataURLOptions:l})}),[{key:"reset",value:function(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}},{key:"freeze",value:function(){this.frozen=!0}},{key:"unfreeze",value:function(){this.frozen=!1}},{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}},{key:"initCanvasFPSObserver",value:function(e,t,n,r,o){var a=this,s=rt(t,n,r,!0),u=new Map,c=new dt;c.onmessage=function(e){var t=e.data.id;if(u.set(t,!1),"base64"in e.data){var n=e.data,r=n.base64,o=n.type,i=n.width,s=n.height;a.mutationCb({id:t,type:ge["2D"],commands:[{property:"clearRect",args:[0,0,i,s]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:o}]},0,0]}]})}};var l,d=1e3/e,f=0,p=function(e){var s;f&&e-f<d?l=requestAnimationFrame(p):(f=e,(s=[],t.document.querySelectorAll("canvas").forEach((function(e){re(e,n,r,!0)||s.push(e)})),s).forEach((function(e){return Xe(a,0,void 0,i().mark((function t(){var n,r,a,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.mirror.getId(e),!u.get(r)){t.next=3;break}return t.abrupt("return");case 3:if(0!==e.width&&0!==e.height){t.next=5;break}return t.abrupt("return");case 5:return u.set(r,!0),["webgl","webgl2"].includes(e.__context)&&(a=e.getContext(e.__context),!1===(null===(n=null==a?void 0:a.getContextAttributes())||void 0===n?void 0:n.preserveDrawingBuffer)&&a.clear(a.COLOR_BUFFER_BIT)),t.next=9,createImageBitmap(e);case 9:s=t.sent,c.postMessage({id:r,bitmap:s,width:e.width,height:e.height,dataURLOptions:o.dataURLOptions},[s]);case 11:case"end":return t.stop()}}),t,this)})))})),l=requestAnimationFrame(p))};l=requestAnimationFrame(p),this.resetObservers=function(){s(),cancelAnimationFrame(l)}}},{key:"initCanvasMutationObserver",value:function(e,t,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var r=rt(e,t,n,!1),o=function(e,t,n,r){var o,i=[],s=a(Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype));try{var u=function(){var a=o.value;try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])return 1;var s=Y(t.CanvasRenderingContext2D.prototype,a,(function(o){return function(){for(var i=this,s=arguments.length,u=new Array(s),c=0;c<s;c++)u[c]=arguments[c];return re(this.canvas,n,r,!0)||setTimeout((function(){var n=tt(u,t,i);e(i.canvas,{type:ge["2D"],property:a,args:n})}),0),o.apply(this,u)}}));i.push(s)}catch(n){var u=J(t.CanvasRenderingContext2D.prototype,a,{set:function(t){e(this.canvas,{type:ge["2D"],property:a,args:[t],setter:!0})}});i.push(u)}};for(s.s();!(o=s.n()).done;)u()}catch(e){s.e(e)}finally{s.f()}return function(){i.forEach((function(e){return e()}))}}(this.processMutation.bind(this),e,t,n),i=function(e,t,n,r){var o=[];return o.push.apply(o,u(ot(t.WebGLRenderingContext.prototype,ge.WebGL,e,n,r,0,t))),void 0!==t.WebGL2RenderingContext&&o.push.apply(o,u(ot(t.WebGL2RenderingContext.prototype,ge.WebGL2,e,n,r,0,t))),function(){o.forEach((function(e){return e()}))}}(this.processMutation.bind(this),e,t,n,this.mirror);this.resetObservers=function(){r(),o(),i()}}},{key:"startPendingCanvasMutationFlusher",value:function(){var e=this;requestAnimationFrame((function(){return e.flushPendingCanvasMutations()}))}},{key:"startRAFTimestamping",value:function(){var e=this,t=function(n){e.rafStamps.latestId=n,requestAnimationFrame(t)};requestAnimationFrame(t)}},{key:"flushPendingCanvasMutations",value:function(){var e=this;this.pendingCanvasMutations.forEach((function(t,n){var r=e.mirror.getId(n);e.flushPendingCanvasMutationFor(n,r)})),requestAnimationFrame((function(){return e.flushPendingCanvasMutations()}))}},{key:"flushPendingCanvasMutationFor",value:function(e,t){if(!this.frozen&&!this.locked){var n=this.pendingCanvasMutations.get(e);if(n&&-1!==t){var r=n.map((function(e){var t=
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["type"]);return t})),o=n[0].type;this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}}}])}(),pt=function(){return o((function e(t){r(this,e),this.trackedLinkElements=new WeakSet,this.styleMirror=new le,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}),[{key:"attachLinkElement",value:function(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}},{key:"trackLinkElement",value:function(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}},{key:"adoptStyleSheets",value:function(e,t){if(0!==e.length){var n,r={id:t,styleIds:[]},o=[],i=a(e);try{for(i.s();!(n=i.n()).done;){var s=n.value,u=void 0;this.styleMirror.has(s)?u=this.styleMirror.getId(s):(u=this.styleMirror.add(s),o.push({styleId:u,rules:Array.from(s.rules||CSSRule,(function(e,t){return{rule:v(e),index:t}}))})),r.styleIds.push(u)}}catch(e){i.e(e)}finally{i.f()}o.length>0&&(r.styles=o),this.adoptedStyleSheetCb(r)}}},{key:"reset",value:function(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}},{key:"trackStylesheetInLinkElement",value:function(e){}}])}(),ht=function(){return o((function e(){r(this,e),this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}),[{key:"periodicallyClear",value:function(){var e=this;requestAnimationFrame((function(){e.clear(),e.loop&&e.periodicallyClear()}))}},{key:"inOtherBuffer",value:function(e,t){var n=this.nodeMap.get(e);return n&&Array.from(n).some((function(e){return e!==t}))}},{key:"add",value:function(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}},{key:"clear",value:function(){this.nodeMap=new WeakMap}},{key:"destroy",value:function(){this.loop=!1}}])}();function mt(e){return Object.assign(Object.assign({},e),{timestamp:Z()})}var vt=!1,yt=new y;function gt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.emit,n=e.checkoutEveryNms,r=e.checkoutEveryNth,o=e.blockClass,i=void 0===o?"rr-block":o,s=e.blockSelector,u=void 0===s?null:s,c=e.ignoreClass,l=void 0===c?"rr-ignore":c,d=e.ignoreSelector,f=void 0===d?null:d,p=e.maskTextClass,h=void 0===p?"rr-mask":p,m=e.maskTextSelector,v=void 0===m?null:m,g=e.inlineStylesheet,b=void 0===g||g,S=e.maskAllInputs,w=e.maskInputOptions,k=e.slimDOMOptions,I=e.maskInputFn,M=e.maskTextFn,C=e.hooks,x=e.packFn,O=e.sampling,E=void 0===O?{}:O,T=e.dataURLOptions,L=void 0===T?{}:T,N=e.mousemoveWait,R=e.recordDOM,D=void 0===R||R,_=e.recordCanvas,A=void 0!==_&&_,F=e.recordCrossOriginIframes,P=void 0!==F&&F,j=e.recordAfter,U=void 0===j?"DOMContentLoaded"===e.recordAfter?e.recordAfter:"load":j,W=e.userTriggeredOnInput,B=void 0!==W&&W,z=e.collectFonts,G=void 0!==z&&z,H=e.inlineImages,K=void 0!==H&&H,X=e.plugins,$=e.keepIframeSrcFn,J=void 0===$?function(){return!1}:$,Y=e.ignoreCSSAttributes,Z=void 0===Y?new Set([]):Y;Te(e.errorHandler);var ne=!P||window.parent===window,re=!1;if(!ne)try{window.parent.document&&(re=!1)}catch(e){re=!0}if(ne&&!t)throw new Error("emit function is required");void 0!==N&&void 0===E.mousemove&&(E.mousemove=N),yt.reset();var oe,ae=!0===S?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==w?w:{password:!0},ie=!0===k||"all"===k?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===k,headMetaDescKeywords:"all"===k}:k||{};!function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0];if(!(0 in n))throw new TypeError("1 argument is required");do{if(e===o)return!0}while(o=o&&o.parentNode);return!1})}();var le=0,de=function(e){var t,n=a(X||[]);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.eventProcessor&&(e=r.eventProcessor(e))}}catch(e){n.e(e)}finally{n.f()}return x&&!re&&(e=x(e)),e};ut=function(e,o){var a;if(!(null===(a=Re[0])||void 0===a?void 0:a.isFrozen())||e.type===he.FullSnapshot||e.type===he.IncrementalSnapshot&&e.data.source===me.Mutation||Re.forEach((function(e){return e.unfreeze()})),ne)null==t||t(de(e),o);else if(re){var i={type:"rrweb",event:de(e),origin:window.location.origin,isCheckout:o};window.parent.postMessage(i,"*")}if(e.type===he.FullSnapshot)oe=e,le=0;else if(e.type===he.IncrementalSnapshot){if(e.data.source===me.Mutation&&e.data.isAttachIframe)return;le++;var s=r&&le>=r,u=n&&e.timestamp-oe.timestamp>n;(s||u)&&ct(!0)}};var fe,pe=function(e){ut(mt({type:he.IncrementalSnapshot,data:Object.assign({source:me.Mutation},e)}))},ve=function(e){return ut(mt({type:he.IncrementalSnapshot,data:Object.assign({source:me.Scroll},e)}))},ye=function(e){return ut(mt({type:he.IncrementalSnapshot,data:Object.assign({source:me.CanvasMutation},e)}))},ge=new pt({mutationCb:pe,adoptedStyleSheetCb:function(e){return ut(mt({type:he.IncrementalSnapshot,data:Object.assign({source:me.AdoptedStyleSheet},e)}))}}),be=new qe({mirror:yt,mutationCb:pe,stylesheetManager:ge,recordCrossOriginIframes:P,wrappedEmit:ut}),Se=a(X||[]);try{for(Se.s();!(fe=Se.n()).done;){var we=fe.value;we.getMirror&&we.getMirror({nodeMirror:yt,crossOriginIframeMirror:be.crossOriginIframeMirror,crossOriginIframeStyleMirror:be.crossOriginIframeStyleMirror})}}catch(e){Se.e(e)}finally{Se.f()}var ke=new ht;lt=new ft({recordCanvas:A,mutationCb:ye,win:window,blockClass:i,blockSelector:u,mirror:yt,sampling:E.canvas,dataURLOptions:L});var Ie=new Ke({mutationCb:pe,scrollCb:ve,bypassOptions:{blockClass:i,blockSelector:u,maskTextClass:h,maskTextSelector:v,inlineStylesheet:b,maskInputOptions:ae,dataURLOptions:L,maskTextFn:M,maskInputFn:I,recordCanvas:A,inlineImages:K,sampling:E,slimDOMOptions:ie,iframeManager:be,stylesheetManager:ge,canvasManager:lt,keepIframeSrcFn:J,processedNodeManager:ke},mirror:yt});ct=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(D){ut(mt({type:he.Meta,data:{href:window.location.href,width:te(),height:ee()}}),e),ge.reset(),Ie.init(),Re.forEach((function(e){return e.lock()}));var t=function(e,t){var n=t||{},r=n.mirror,o=void 0===r?new y:r,a=n.blockClass,i=void 0===a?"rr-block":a,s=n.blockSelector,u=void 0===s?null:s,c=n.maskTextClass,l=void 0===c?"rr-mask":c,d=n.maskTextSelector,f=void 0===d?null:d,p=n.inlineStylesheet,h=void 0===p||p,m=n.inlineImages,v=void 0!==m&&m,g=n.recordCanvas,b=void 0!==g&&g,S=n.maskAllInputs,w=void 0!==S&&S,k=n.maskTextFn,I=n.maskInputFn,M=n.slimDOM,C=void 0!==M&&M,x=n.dataURLOptions,O=n.preserveWhiteSpace,E=n.onSerialize,T=n.onIframeLoad,L=n.iframeLoadTimeout,N=n.onStylesheetLoad,R=n.stylesheetLoadTimeout,D=n.keepIframeSrcFn;return V(e,{doc:e,mirror:o,blockClass:i,blockSelector:u,maskTextClass:l,maskTextSelector:f,skipChild:!1,inlineStylesheet:h,maskInputOptions:!0===w?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===w?{password:!0}:w,maskTextFn:k,maskInputFn:I,slimDOMOptions:!0===C||"all"===C?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===C,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===C?{}:C,dataURLOptions:x,inlineImages:v,recordCanvas:b,preserveWhiteSpace:O,onSerialize:E,onIframeLoad:T,iframeLoadTimeout:L,onStylesheetLoad:N,stylesheetLoadTimeout:R,keepIframeSrcFn:void 0===D?function(){return!1}:D,newlyAddedElement:!1})}(document,{mirror:yt,blockClass:i,blockSelector:u,maskTextClass:h,maskTextSelector:v,inlineStylesheet:b,maskAllInputs:ae,maskTextFn:M,slimDOM:ie,dataURLOptions:L,recordCanvas:A,inlineImages:K,onSerialize:function(e){se(e,yt)&&be.addIframe(e),ue(e,yt)&&ge.trackLinkElement(e),ce(e)&&Ie.addShadowRoot(e.shadowRoot,document)},onIframeLoad:function(e,t){be.attachIframe(e,t),Ie.observeAttachShadow(e)},onStylesheetLoad:function(e,t){ge.attachLinkElement(e,t)},keepIframeSrcFn:J});if(!t)return console.warn("Failed to snapshot the document");ut(mt({type:he.FullSnapshot,data:{node:t,initialOffset:Q(window)}}),e),Re.forEach((function(e){return e.unlock()})),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&ge.adoptStyleSheets(document.adoptedStyleSheets,yt.getId(document))}};try{var Me=[],Ce=function(e){var t;return Ne(ze)({mutationCb:pe,mousemoveCb:function(e,t){return ut(mt({type:he.IncrementalSnapshot,data:{source:t,positions:e}}))},mouseInteractionCb:function(e){return ut(mt({type:he.IncrementalSnapshot,data:Object.assign({source:me.MouseInteraction},e)}))},scrollCb:ve,viewportResizeCb:function(e){return ut(mt({type:he.IncrementalSnapshot,data:Object.assign({source:me.ViewportResize},e)}))},inputCb:function(e){return ut(mt({type:he.IncrementalSnapshot,data:Object.assign({source:me.Input},e)}))},mediaInteractionCb:function(e){return ut(mt({type:he.IncrementalSnapshot,data:Object.assign({source:me.MediaInteraction},e)}))},styleSheetRuleCb:function(e){return ut(mt({type:he.IncrementalSnapshot,data:Object.assign({source:me.StyleSheetRule},e)}))},styleDeclarationCb:function(e){return ut(mt({type:he.IncrementalSnapshot,data:Object.assign({source:me.StyleDeclaration},e)}))},canvasMutationCb:ye,fontCb:function(e){return ut(mt({type:he.IncrementalSnapshot,data:Object.assign({source:me.Font},e)}))},selectionCb:function(e){ut(mt({type:he.IncrementalSnapshot,data:Object.assign({source:me.Selection},e)}))},customElementCb:function(e){ut(mt({type:he.IncrementalSnapshot,data:Object.assign({source:me.CustomElement},e)}))},blockClass:i,ignoreClass:l,ignoreSelector:f,maskTextClass:h,maskTextSelector:v,maskInputOptions:ae,inlineStylesheet:b,sampling:E,recordDOM:D,recordCanvas:A,inlineImages:K,userTriggeredOnInput:B,collectFonts:G,doc:e,maskInputFn:I,maskTextFn:M,keepIframeSrcFn:J,blockSelector:u,slimDOMOptions:ie,dataURLOptions:L,mirror:yt,iframeManager:be,stylesheetManager:ge,shadowDomManager:Ie,processedNodeManager:ke,canvasManager:lt,ignoreCSSAttributes:Z,plugins:(null===(t=null==X?void 0:X.filter((function(e){return e.observer})))||void 0===t?void 0:t.map((function(e){return{observer:e.observer,options:e.options,callback:function(t){return ut(mt({type:he.Plugin,data:{plugin:e.name,payload:t}}))}}})))||[]},C)};be.addLoadListener((function(e){try{Me.push(Ce(e.contentDocument))}catch(e){console.warn(e)}}));var xe=function(){ct(),Me.push(Ce(document)),vt=!0};return"interactive"===document.readyState||"complete"===document.readyState?xe():(Me.push(q("DOMContentLoaded",(function(){ut(mt({type:he.DomContentLoaded,data:{}})),"DOMContentLoaded"===U&&xe()}))),Me.push(q("load",(function(){ut(mt({type:he.Load,data:{}})),"load"===U&&xe()}),window))),function(){Me.forEach((function(e){return e()})),ke.destroy(),vt=!1,Le()}}catch(e){console.warn(e)}}gt.addCustomEvent=function(e,t){if(!vt)throw new Error("please add custom event after start recording");ut(mt({type:he.Custom,data:{tag:e,payload:t}}))},gt.freezePage=function(){Re.forEach((function(e){return e.freeze()}))},gt.takeFullSnapshot=function(e){if(!vt)throw new Error("please take full snapshot after start recording");ct(e)},gt.mirror=yt;var bt=function(){return o((function e(t){r(this,e),this.fileName=t.fileName||"",this.functionName=t.functionName||"",this.lineNumber=t.lineNumber,this.columnNumber=t.columnNumber}),[{key:"toString",value:function(){var e=this.lineNumber||"",t=this.columnNumber||"";return this.functionName?"".concat(this.functionName," (").concat(this.fileName,":").concat(e,":").concat(t,")"):"".concat(this.fileName,":").concat(e,":").concat(t)}}])}(),St=/(^|@)\S+:\d+/,wt=/^\s*at .*(\S+:\d+|\(native\))/m,kt=/^(eval@)?(\[native code])?$/,It={parse:function(e){return e?void 0!==e.stacktrace||void 0!==e["opera#sourceloc"]?this.parseOpera(e):e.stack&&e.stack.match(wt)?this.parseV8OrIE(e):e.stack?this.parseFFOrSafari(e):(console.warn("[console-record-plugin]: Failed to parse error object:",e),[]):[]},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));if(!t)throw new Error("Cannot parse given url: ".concat(e));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(wt)}),this).map((function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var t=e.replace(/^\s+/,"").replace(/\(eval code/g,"("),n=t.match(/ (\((.+):(\d+):(\d+)\)$)/),r=(t=n?t.replace(n[0],""):t).split(/\s+/).slice(1),o=this.extractLocation(n?n[1]:r.pop()),a=r.join(" ")||void 0,i=["eval","<anonymous>"].indexOf(o[0])>-1?void 0:o[0];return new bt({functionName:a,fileName:i,lineNumber:o[1],columnNumber:o[2]})}),this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter((function(e){return!e.match(kt)}),this).map((function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new bt({functionName:e});var t=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=e.match(t),r=n&&n[1]?n[1]:void 0,o=this.extractLocation(e.replace(t,""));return new bt({functionName:r,fileName:o[0],lineNumber:o[1],columnNumber:o[2]})}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),r=[],o=2,a=n.length;o<a;o+=2){var i=t.exec(n[o]);i&&r.push(new bt({fileName:i[2],lineNumber:parseFloat(i[1])}))}return r},parseOpera10:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),r=[],o=0,a=n.length;o<a;o+=2){var i=t.exec(n[o]);i&&r.push(new bt({functionName:i[3]||void 0,fileName:i[2],lineNumber:parseFloat(i[1])}))}return r},parseOpera11:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(St)&&!e.match(/^Error created at/)}),this).map((function(e){var t=e.split("@"),n=this.extractLocation(t.pop()),r=(t.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return new bt({functionName:r,fileName:n[0],lineNumber:n[1],columnNumber:n[2]})}),this)}};function Mt(e){if(!e||!e.outerHTML)return"";for(var t="";e.parentElement;){var n=e.localName;if(!n)break;n=n.toLowerCase();var r=e.parentElement,o=[];if(r.children&&r.children.length>0)for(var a=0;a<r.children.length;a++){var i=r.children[a];i.localName&&i.localName.toLowerCase&&i.localName.toLowerCase()===n&&o.push(i)}o.length>1&&(n+=":eq(".concat(o.indexOf(e),")")),t=n+(t?">"+t:""),e=r}return t}function Ct(e){return"[object Object]"===Object.prototype.toString.call(e)}function xt(e,t){if(0===t)return!0;for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];if(Ct(e[o])&&xt(e[o],t-1))return!0}return!1}function Ot(e,t){var n={numOfKeysLimit:50,depthOfLimit:4};Object.assign(n,t);var r=[],o=[];return JSON.stringify(e,(function(e,t){if(r.length>0){var a=r.indexOf(this);~a?r.splice(a+1):r.push(this),~a?o.splice(a,1/0,e):o.push(e),~r.indexOf(t)&&(t=r[0]===t?"[Circular ~]":"[Circular ~."+o.slice(0,r.indexOf(t)).join(".")+"]")}else r.push(t);if(null===t)return t;if(void 0===t)return"undefined";if(function(e){if(Ct(e)&&Object.keys(e).length>n.numOfKeysLimit)return!0;if("function"==typeof e)return!0;if(Ct(e)&&xt(e,n.depthOfLimit))return!0;return!1}(t))return function(e){var t=e.toString();n.stringLengthLimit&&t.length>n.stringLengthLimit&&(t="".concat(t.slice(0,n.stringLengthLimit),"..."));return t}(t);if("bigint"==typeof t)return t.toString()+"n";if(t instanceof Event){var i={};for(var s in t){var u=t[s];Array.isArray(u)?i[s]=Mt(u.length?u[0]:null):i[s]=u}return i}return t instanceof Node?t instanceof HTMLElement?t?t.outerHTML:"":t.nodeName:t instanceof Error?t.stack?t.stack+"\nEnd of stack for Error object":t.name+": "+t.message:t}))}var Et={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:"console"};function Tt(e,t,n){var r,o=n?Object.assign({},Et,n):Et,i=o.logger;if(!i)return function(){};r="string"==typeof i?t[i]:i;var s=0,u=!1,c=[];if(o.level.includes("error")){var l=function(t){var n=t.message,r=t.error,a=It.parse(r).map((function(e){return e.toString()})),i=[Ot(n,o.stringifyOptions)];e({level:"error",trace:a,payload:i})};t.addEventListener("error",l),c.push((function(){t.removeEventListener("error",l)}));var d=function(t){var n,r;t.reason instanceof Error?(n=t.reason,r=[Ot("Uncaught (in promise) ".concat(n.name,": ").concat(n.message),o.stringifyOptions)]):(n=new Error,r=[Ot("Uncaught (in promise)",o.stringifyOptions),Ot(t.reason,o.stringifyOptions)]);var a=It.parse(n).map((function(e){return e.toString()}));e({level:"error",trace:a,payload:r})};t.addEventListener("unhandledrejection",d),c.push((function(){t.removeEventListener("unhandledrejection",d)}))}var f,p=a(o.level);try{for(p.s();!(f=p.n()).done;){var h=f.value;c.push(m(r,h))}}catch(e){p.e(e)}finally{p.f()}return function(){c.forEach((function(e){return e()}))};function m(t,n){var r=this;return t[n]?Y(t,n,(function(t){return function(){for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];if(t.apply(r,i),!u){u=!0;try{var l=It.parse(new Error).map((function(e){return e.toString()})).splice(1),d=i.map((function(e){return Ot(e,o.stringifyOptions)}));++s<o.lengthThreshold?e({level:n,trace:l,payload:d}):s===o.lengthThreshold&&e({level:"warn",trace:[],payload:[Ot("The number of log records reached the threshold.")]})}catch(e){t.apply(void 0,["rrweb logger error:",e].concat(i))}finally{u=!1}}}})):function(){}}}var Lt={name:"rrweb/console@1",observer:Tt,options:{level:["info","log","warn","error"],lengthThreshold:2e3,stringifyOptions:{stringLengthLimit:1e3,numOfKeysLimit:100,depthOfLimit:4},logger:window.console}};function Nt(e,t){var n;if(100==t)return"<UNK>";if(""!==e.id)return'//*[@id="'.concat(e.id,'"]');if(e===document.body)return"/html/body";var r=0,o=null===(n=e.parentNode)||void 0===n?void 0:n.childNodes;if(o)for(var a=0;a<o.length;a++){var i=o[a];if(i===e)return Nt(e.parentNode,t+1)+"/"+e.tagName.toLowerCase()+"[".concat(r+1,"]");1===i.nodeType&&i.nodeName===e.nodeName&&r++}return""}var Rt={name:"sitewiz/clickedElement@1",observer:function(e,t){return t.addEventListener("click",(function(t){var n=t.target,r={type:"click",timestamp:Date.now(),target:n.tagName,outerHTML:n.outerHTML,xPath:Nt(n,0),x:t.clientX,y:t.clientY};e(r)})),function(){}},options:{},reset:function(){}};function Dt(e){var t=setInterval((function(){var n=function(){for(var e="_ga=",t=decodeURIComponent(document.cookie).split(";"),n=0;n<t.length;n++){var r=t[n].trim();if(0==r.indexOf(e)){var o=r.substring(4).split(".");if(4==o.length)return o[2]+"."+o[3]}}return""}();if(n){var r={clientId:n,timestamp:Date.now()};e(r),clearInterval(t)}}),2e3)}var _t={name:"sitewiz/ga4@1",observer:function(e){return Dt(e),function(){}},options:{},reset:function(){}};function At(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))}function Ft(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}function Pt(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}"function"==typeof SuppressedError&&SuppressedError;var jt=Array.isArray,Ut=Object.prototype.toString,Wt=jt||function(e){return"[object Array]"===Ut.call(e)},Bt=function(e){return e===Object(e)&&!Wt(e)},zt=["localhost","127.0.0.1"],Gt="Mobile",Ht="iOS",Vt="Android",qt="Tablet",Kt=Vt+" "+qt,Xt="iPad",$t="Apple",Jt=$t+" Watch",Yt="Safari",Zt="BlackBerry",Qt="Samsung",en=Qt+"Browser",tn=Qt+" Internet",nn="Chrome",rn=nn+" OS",on=nn+" "+Ht,an="Internet Explorer",sn=an+" "+Gt,un="Opera",cn=un+" Mini",ln="Edge",dn="Microsoft "+ln,fn="Firefox",pn=fn+" "+Ht,hn="Nintendo",mn="PlayStation",vn="Xbox",yn=Vt+" "+Gt,gn=Gt+" "+Yt,bn="Windows",Sn=bn+" Phone",wn="Nokia",kn="Ouya",In="Generic",Mn=In+" "+Gt.toLowerCase(),Cn=In+" "+qt.toLowerCase(),xn="Konqueror",On=new RegExp(vn,"i"),En=new RegExp(mn+" \\w+","i"),Tn=new RegExp(hn+" \\w+","i"),Ln=new RegExp(Zt+"|PlayBook|BB10","i"),Nn=[[new RegExp(vn+"; "+vn+" (.*?)[);]","i"),function(e){return[vn,e&&e[1]||""]}],[new RegExp(hn,"i"),[hn,""]],[new RegExp(mn,"i"),[mn,""]],[Ln,[Zt,""]],[new RegExp(bn,"i"),function(e,t){if(/Phone/.test(t)||/WPDesktop/.test(t))return[Sn,""];if(new RegExp(Gt).test(t)&&!/IEMobile\b/.test(t))return[bn+" "+Gt,""];var n=/Windows NT ([0-9.]+)/i.exec(t);return n&&n[1]&&n[1],[bn,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,function(e){if(e&&e[3]){var t=[e[3],e[4],e[5]||"0"];return[Ht,t.join(".")]}return[Ht,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,function(e){var t="";return e&&e.length>=3&&(t=function(e){return void 0===e}(e[2])?e[3]:e[2]),["watchOS",t]}],[new RegExp("("+Vt+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Vt+")","i"),function(e){if(e&&e[2]){var t=[e[2],e[3],e[4]||"0"];return[Vt,t.join(".")]}return[Vt,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,function(e){var t=["Mac OS X",""];if(e&&e[1]){var n=[e[1],e[2],e[3]||"0"];t[1]=n.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[rn,""]],[/Linux|debian/i,["Linux",""]]],Rn=function(e,t){return!function(e){return null===e}(e)&&-1!=e.indexOf(t)};var Dn=function(e,t){return t&&Rn(t,$t)||Rn(n=e,Yt)&&!Rn(n,nn)&&!Rn(n,Vt);var n},_n=function(e){return Tn.test(e)?hn:En.test(e)?mn:On.test(e)?vn:new RegExp(kn,"i").test(e)?kn:new RegExp("("+Sn+"|WPDesktop)","i").test(e)?Sn:/iPad/.test(e)?Xt:/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e)?Jt:Ln.test(e)?Zt:/(kobo)\s(ereader|touch)/i.test(e)?"Kobo":new RegExp(wn,"i").test(e)?wn:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e)||/(kf[a-z]+)( bui|\)).+silk\//i.test(e)?"Kindle Fire":/(Android|ZTE)/i.test(e)?!new RegExp(Gt).test(e)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e)?/pixel[\daxl ]{1,6}/i.test(e)&&!/pixel c/i.test(e)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e)||/lmy47v/i.test(e)&&!/QTAQZ3/i.test(e)?Vt:Kt:Vt:new RegExp("(pda|"+Gt+")","i").test(e)?Mn:new RegExp(qt,"i").test(e)&&!new RegExp(qt+" pc","i").test(e)?Cn:""},An=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","mc_cid","igshid","ttclid","rdt_cid"];var Fn={campaignParams:function(){if(!document)return{};var e=document.URL,t={};return An.forEach((function(n){var r=function(e,t){for(var n,r=(e.split("?")[1]||"").split("&"),o=0;o<r.length;o++){var a=r[o].split("=");if(a[0]===t){n=a;break}}if(!Wt(n)||n.length<2)return"";var i=n[1];try{i=decodeURIComponent(i)}catch(e){console.log("Skipping decoding for malformed query param: "+i)}return i.replace(/\+/g," ")}(e,n);r&&(t[n]=r)})),t},detectOS:function(e){for(var t=0;t<Nn.length;t++){var n=Pt(Nn[t],2),r=n[0],o=n[1],a=r.exec(e),i=a&&("function"==typeof o?o(a,e):o);if(i)return i}return["",""]},detectBrowser:function(e,t){return t=t||"",Rn(e," OPR/")&&Rn(e,"Mini")?cn:Rn(e," OPR/")?un:Ln.test(e)?Zt:Rn(e,"IE"+Gt)||Rn(e,"WPDesktop")?sn:Rn(e,en)?tn:Rn(e,ln)||Rn(e,"Edg/")?dn:Rn(e,"FBIOS")?"Facebook "+Gt:Rn(e,"UCWEB")||Rn(e,"UCBrowser")?"UC Browser":Rn(e,"CriOS")?on:Rn(e,"CrMo")?nn:Rn(e,Vt)&&Rn(e,Yt)?yn:Rn(e,nn)?nn:Rn(e,"FxiOS")?pn:Rn(e.toLowerCase(),xn.toLowerCase())?xn:Dn(e,t)?Rn(e,Gt)?gn:Yt:Rn(e,fn)?fn:Rn(e,"MSIE")||Rn(e,"Trident/")?an:Rn(e,"Gecko")?fn:""},detectBrowserLanguage:function(){return navigator.language||navigator.userLanguage},detectDevice:_n,detectDeviceType:function(e){var t=_n(e);return t===Xt||t===Kt||"Kobo"===t||"Kindle Fire"===t||t===Cn?qt:t===hn||t===vn||t===mn||t===kn?"Console":t===Jt?"Wearable":t?Gt:"Desktop"},detectIP:function(){return At(this,void 0,void 0,(function(){return Ft(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,fetch("https://api.ipify.org?format=json")];case 1:return[4,e.sent().json()];case 2:return[2,e.sent().ip];case 3:return e.sent(),[2,"0.0.0.0"];case 4:return[2]}}))}))}},Pn={name:"sitewiz/ua@1",observer:function(e){return At(void 0,void 0,void 0,(function(){var t,n;return Ft(this,(function(r){switch(r.label){case 0:return(null===navigator||void 0===navigator?void 0:navigator.userAgent)?(t=navigator.userAgent,n={browser:Fn.detectBrowser(t,navigator.vendor),browserLanguage:Fn.detectBrowserLanguage(),os:Fn.detectOS(t),device:Fn.detectDevice(t),deviceType:Fn.detectDeviceType(t)},[4,Fn.detectIP()]):[3,2];case 1:n.ip=r.sent(),e(n),r.label=2;case 2:return[2,function(){}]}}))}))},option:{},reset:function(){}},jn=function(e,t){void 0===t&&(t={});var n,r,o=this;this.rrweb=e,this.options=t,this.bucketSize=100,this.refillRate=10,this.mutationBuckets={},this.loggedTracker={},this.refillBuckets=function(){Object.keys(o.mutationBuckets).forEach((function(e){o.mutationBuckets[e]=o.mutationBuckets[e]+o.refillRate,o.mutationBuckets[e]>=o.bucketSize&&delete o.mutationBuckets[e]}))},this.getNodeOrRelevantParent=function(e){var t=o.rrweb.mirror.getNode(e);if("svg"!==(null==t?void 0:t.nodeName)&&t instanceof Element){var n=t.closest("svg");if(n)return[o.rrweb.mirror.getId(n),n]}return[e,t]},this.numberOfChanges=function(e){var t,n,r,o,a,i,s,u;return(null!==(n=null===(t=e.removes)||void 0===t?void 0:t.length)&&void 0!==n?n:0)+(null!==(o=null===(r=e.attributes)||void 0===r?void 0:r.length)&&void 0!==o?o:0)+(null!==(i=null===(a=e.texts)||void 0===a?void 0:a.length)&&void 0!==i?i:0)+(null!==(u=null===(s=e.adds)||void 0===s?void 0:s.length)&&void 0!==u?u:0)},this.throttleMutations=function(e){if(3!==e.type||0!==e.data.source)return e;var t=e.data,n=o.numberOfChanges(t);t.attributes&&(t.attributes=t.attributes.filter((function(e){var t,n,r,a=Pt(o.getNodeOrRelevantParent(e.id),2),i=a[0],s=a[1];return 0!==o.mutationBuckets[i]&&(o.mutationBuckets[i]=null!==(t=o.mutationBuckets[i])&&void 0!==t?t:o.bucketSize,o.mutationBuckets[i]=Math.max(o.mutationBuckets[i]-1,0),0===o.mutationBuckets[i]&&(o.loggedTracker[i]||(o.loggedTracker[i]=!0,null===(r=(n=o.options).onBlockedNode)||void 0===r||r.call(n,i,s))),e)})));var r=o.numberOfChanges(t);return 0===r&&n!==r?null:e},this.refillRate=null!==(n=this.options.refillRate)&&void 0!==n?n:this.refillRate,this.bucketSize=null!==(r=this.options.bucketSize)&&void 0!==r?r:this.bucketSize,setInterval((function(){o.refillBuckets()}),1e3)},Un=Uint8Array,Wn=Uint16Array,Bn=Uint32Array,zn=new Un([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Gn=new Un([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Hn=new Un([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Vn=function(e,t){for(var n=new Wn(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var o=new Bn(n[30]);for(r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)o[a]=a-n[r]<<5|r;return[n,o]},qn=Vn(zn,2),Kn=qn[0],Xn=qn[1];Kn[28]=258,Xn[258]=28;for(var $n=Vn(Gn,0)[1],Jn=new Wn(32768),Yn=0;Yn<32768;++Yn){var Zn=(43690&Yn)>>>1|(21845&Yn)<<1;Zn=(61680&(Zn=(52428&Zn)>>>2|(13107&Zn)<<2))>>>4|(3855&Zn)<<4,Jn[Yn]=((65280&Zn)>>>8|(255&Zn)<<8)>>>1}var Qn=function(e,t,n){for(var r=e.length,o=0,a=new Wn(t);o<r;++o)++a[e[o]-1];var i,s=new Wn(t);for(o=0;o<t;++o)s[o]=s[o-1]+a[o-1]<<1;if(n){i=new Wn(1<<t);var u=15-t;for(o=0;o<r;++o)if(e[o])for(var c=o<<4|e[o],l=t-e[o],d=s[e[o]-1]++<<l,f=d|(1<<l)-1;d<=f;++d)i[Jn[d]>>>u]=c}else for(i=new Wn(r),o=0;o<r;++o)i[o]=Jn[s[e[o]-1]++]>>>15-e[o];return i},er=new Un(288);for(Yn=0;Yn<144;++Yn)er[Yn]=8;for(Yn=144;Yn<256;++Yn)er[Yn]=9;for(Yn=256;Yn<280;++Yn)er[Yn]=7;for(Yn=280;Yn<288;++Yn)er[Yn]=8;var tr=new Un(32);for(Yn=0;Yn<32;++Yn)tr[Yn]=5;var nr=Qn(er,9,0),rr=Qn(tr,5,0),or=function(e){return(e/8|0)+(7&e&&1)},ar=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},ir=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},sr=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var o=n.length,a=n.slice();if(!o)return[new Un(0),0];if(1==o){var i=new Un(n[0].s+1);return i[n[0].s]=1,[i,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],u=n[1],c=0,l=1,d=2;for(n[0]={s:-1,f:s.f+u.f,l:s,r:u};l!=o-1;)s=n[n[c].f<n[d].f?c++:d++],u=n[c!=l&&n[c].f<n[d].f?c++:d++],n[l++]={s:-1,f:s.f+u.f,l:s,r:u};var f=a[0].s;for(r=1;r<o;++r)a[r].s>f&&(f=a[r].s);var p=new Wn(f+1),h=ur(n[l-1],p,0);if(h>t){r=0;var m=0,v=h-t,y=1<<v;for(a.sort((function(e,t){return p[t.s]-p[e.s]||e.f-t.f}));r<o;++r){var g=a[r].s;if(!(p[g]>t))break;m+=y-(1<<h-p[g]),p[g]=t}for(m>>>=v;m>0;){var b=a[r].s;p[b]<t?m-=1<<t-p[b]++-1:++r}for(;r>=0&&m;--r){var S=a[r].s;p[S]==t&&(--p[S],++m)}h=t}return[new Un(p),h]},ur=function(e,t,n){return-1==e.s?Math.max(ur(e.l,t,n+1),ur(e.r,t,n+1)):t[e.s]=n},cr=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Wn(++t),r=0,o=e[0],a=1,i=function(e){n[r++]=e},s=1;s<=t;++s)if(e[s]==o&&s!=t)++a;else{if(!o&&a>2){for(;a>138;a-=138)i(32754);a>2&&(i(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(i(o),--a;a>6;a-=6)i(8304);a>2&&(i(a-3<<5|8208),a=0)}for(;a--;)i(o);a=1,o=e[s]}return[n.subarray(0,r),t]},lr=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},dr=function(e,t,n){var r=n.length,o=or(t+2);e[o]=255&r,e[o+1]=r>>>8,e[o+2]=255^e[o],e[o+3]=255^e[o+1];for(var a=0;a<r;++a)e[o+a+4]=n[a];return 8*(o+4+r)},fr=function(e,t,n,r,o,a,i,s,u,c,l){ar(t,l++,n),++o[256];for(var d=sr(o,15),f=d[0],p=d[1],h=sr(a,15),m=h[0],v=h[1],y=cr(f),g=y[0],b=y[1],S=cr(m),w=S[0],k=S[1],I=new Wn(19),M=0;M<g.length;++M)I[31&g[M]]++;for(M=0;M<w.length;++M)I[31&w[M]]++;for(var C=sr(I,7),x=C[0],O=C[1],E=19;E>4&&!x[Hn[E-1]];--E);var T,L,N,R,D=c+5<<3,_=lr(o,er)+lr(a,tr)+i,A=lr(o,f)+lr(a,m)+i+14+3*E+lr(I,x)+(2*I[16]+3*I[17]+7*I[18]);if(D<=_&&D<=A)return dr(t,l,e.subarray(u,u+c));if(ar(t,l,1+(A<_)),l+=2,A<_){T=Qn(f,p,0),L=f,N=Qn(m,v,0),R=m;var F=Qn(x,O,0);ar(t,l,b-257),ar(t,l+5,k-1),ar(t,l+10,E-4),l+=14;for(M=0;M<E;++M)ar(t,l+3*M,x[Hn[M]]);l+=3*E;for(var P=[g,w],j=0;j<2;++j){var U=P[j];for(M=0;M<U.length;++M){var W=31&U[M];ar(t,l,F[W]),l+=x[W],W>15&&(ar(t,l,U[M]>>>5&127),l+=U[M]>>>12)}}}else T=nr,L=er,N=rr,R=tr;for(M=0;M<s;++M)if(r[M]>255){W=r[M]>>>18&31;ir(t,l,T[W+257]),l+=L[W+257],W>7&&(ar(t,l,r[M]>>>23&31),l+=zn[W]);var B=31&r[M];ir(t,l,N[B]),l+=R[B],B>3&&(ir(t,l,r[M]>>>5&8191),l+=Gn[B])}else ir(t,l,T[r[M]]),l+=L[r[M]];return ir(t,l,T[256]),l+L[256]},pr=new Bn([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),hr=function(e,t,n,r,o,a){var i=e.length,s=new Un(r+i+5*(1+Math.floor(i/7e3))+o),u=s.subarray(r,s.length-o),c=0;if(!t||i<8)for(var l=0;l<=i;l+=65535){var d=l+65535;d<i?c=dr(u,c,e.subarray(l,d)):(u[l]=a,c=dr(u,c,e.subarray(l,i)))}else{for(var f=pr[t-1],p=f>>>13,h=8191&f,m=(1<<n)-1,v=new Wn(32768),y=new Wn(m+1),g=Math.ceil(n/3),b=2*g,S=function(t){return(e[t]^e[t+1]<<g^e[t+2]<<b)&m},w=new Bn(25e3),k=new Wn(288),I=new Wn(32),M=0,C=0,x=(l=0,0),O=0,E=0;l<i;++l){var T=S(l),L=32767&l,N=y[T];if(v[L]=N,y[T]=L,O<=l){var R=i-l;if((M>7e3||x>24576)&&R>423){c=fr(e,u,0,w,k,I,C,x,E,l-E,c),x=M=C=0,E=l;for(var D=0;D<286;++D)k[D]=0;for(D=0;D<30;++D)I[D]=0}var _=2,A=0,F=h,P=L-N&32767;if(R>2&&T==S(l-P))for(var j=Math.min(p,R)-1,U=Math.min(32767,l),W=Math.min(258,R);P<=U&&--F&&L!=N;){if(e[l+_]==e[l+_-P]){for(var B=0;B<W&&e[l+B]==e[l+B-P];++B);if(B>_){if(_=B,A=P,B>j)break;var z=Math.min(P,B-2),G=0;for(D=0;D<z;++D){var H=l-P+D+32768&32767,V=H-v[H]+32768&32767;V>G&&(G=V,N=H)}}}P+=(L=N)-(N=v[L])+32768&32767}if(A){w[x++]=268435456|Xn[_]<<18|$n[A];var q=31&Xn[_],K=31&$n[A];C+=zn[q]+Gn[K],++k[257+q],++I[K],O=l+_,++M}else w[x++]=e[l],++k[e[l]]}}c=fr(e,u,a,w,k,I,C,x,E,l-E,c)}return function(e,t,n){(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof Wn?Wn:e instanceof Bn?Bn:Un)(n-t);return r.set(e.subarray(t,n)),r}(s,0,r+or(c)+o)};function mr(e,t){return void 0===t&&(t={}),o=0,a=0,hr(n=e,null==(r=t).level?6:r.level,null==r.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(n.length)))):12+r.mem,o,a,!i);var n,r,o,a,i}function vr(e){return JSON.stringify(e,(t=[],function(e,n){if(Bt(n)){for(;t.length>0&&t.at(-1)!==this;)t.pop();return t.includes(n)?"[Circular]":(t.push(n),n)}return n})).length;var t}function yr(e,t){if(void 0===t&&(t=6606028.8),e.size>=t&&Wt(e.data)&&e.data.length>1){var n=Math.floor(e.data.length/2),r=e.data.slice(0,n),o=e.data.slice(n);return[yr({size:vr(r),data:r,partitionKey:e.partitionKey,stream_key:e.stream_key}),yr({size:vr(o),data:o,partitionKey:e.partitionKey,stream_key:e.stream_key})].flatMap((function(e){return e}))}return[e]}var gr=function(e,t){var n={data:e,stream_key:t},r=JSON.stringify(n);return function(e){for(var t="",n=e.byteLength,r=0;r<n;r++)t+=String.fromCharCode(e[r]);return btoa(t)}(mr((new TextEncoder).encode(r)))},br=function(){function e(e){var t=this;this.packets=[],this.processing=!1,this.maxRetries=5,this.baseDelay=500,this.sending=!1,this.local=!1,this.delay=function(e){return new Promise((function(t){return setTimeout(t,e)}))},this.isFullPageSnapshot=function(e){return e.type===he.FullSnapshot},this.splitBySnapshot=function(e){for(var n=[],r=0,o=0;o<e.length;o++)t.isFullPageSnapshot(e[o])&&(r<o&&n.push(e.slice(r,o)),n.push(e.slice(o,o+1)),r=o+1);return r<e.length&&n.push(e.slice(r)),n},this.bufferToDatapacket=function(e,t){var n=[];return e.forEach((function(e){var r={buffer:e,fullSnapshot:t};n.push(r)})),n},this.processPacket=function(e){var n=e.buffer.stream_key,r=e.buffer.partitionKey;if(e.fullSnapshot&&Wt(e.buffer.data)){e.buffer.data.shift();var o=t.splitBySnapshot(e.buffer.data),a=[];return o.forEach((function(o){if(t.isFullPageSnapshot(o[0])){var i=function(e,t,n){for(var r=gr(e,n),o=[],a=Math.floor(522240),i=0;i<r.length;){var s=Math.min(i+a,r.length),u=r.substring(i,s),c={size:u.length,data:u,partitionKey:t,stream_key:n,splitFullSnapshot:!0};o.push(c),i=s}return o}(o,r,n);a.push.apply(a,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],Pt(i),!1))}else{var s={size:vr(o),data:o,partitionKey:e.buffer.partitionKey,stream_key:e.buffer.stream_key};a.push(s)}})),a}return Wt(e.buffer.data)?yr(e.buffer):[e.buffer]},this.sendPackets=function(e){var n=t.processPacket(e);if(n.length>1)n.slice().reverse().forEach((function(e){t.packets.unshift({buffer:e,fullSnapshot:!1})}));else{var r={events:"string"!=typeof n[0].data?gr(n[0].data,n[0].stream_key):n[0].data,fullPageSnapshot:!!n[0].splitFullSnapshot,stream_key:n[0].stream_key,session:n[0].partitionKey},o=t.local?"https://webhook.site/a5725c69-7db0-4d59-ab0b-9eb199a4d765":"https://3c1vg79qm1.execute-api.us-east-1.amazonaws.com/prod/record",a={"Content-Type":"application/json;charset=UTF-8",Accept:"*/*",Connection:"Keep-Alive"};t.local||(a["X-API-KEY"]=n[0].stream_key);var i={method:"POST",headers:a,body:JSON.stringify({partitionKey:n[0].partitionKey,data:r})};t.local&&(i.mode="no-cors"),t.sending=!0,fetch(o,i).then((function(n){return At(t,void 0,void 0,(function(){var t;return Ft(this,(function(r){switch(r.label){case 0:return n.ok||"opaque"===n.type?[3,3]:(e.retryCount=(e.retryCount||0)+1,e.retryCount<=this.maxRetries?(t=this.baseDelay*Math.pow(2,e.retryCount),this.local&&console.log("Retrying in ".concat(t," ms (Attempt ").concat(e.retryCount,"/").concat(this.maxRetries,")")),[4,this.delay(t)]):[3,2]);case 1:return r.sent(),this.packets.unshift(e),[3,3];case 2:this.local&&console.error("Max retries reached. Dropping packet:",e),r.label=3;case 3:return this.sending=!1,[2]}}))}))}))}},this.addPackets=function(e,n){var r=JSON.parse(JSON.stringify(e));t.local&&(console.log(r.data),console.log(n)),t.packets.push({buffer:r,fullSnapshot:n})},this.recorder=e,this.local=zt.includes(location.hostname),this.poll()}return e.prototype.poll=function(){return At(this,void 0,void 0,(function(){var e=this;return Ft(this,(function(t){return setInterval((function(){return At(e,void 0,void 0,(function(){var e;return Ft(this,(function(t){return this.processing||this.sending||(this.processing=!0,(e=this.packets.shift())&&this.sendPackets(e),this.processing=!1),[2]}))}))}),500),[2]}))}))},e}(),Sr=function(){function e(e){var t=this;this.record=!1,this.fullSnapshotExists=!1,this.set_keys=function(e,n){t.stream_key=e,t.session_id=n},this._emit=function(){if(t.record&&t.events.length>0&&t.stream_key&&t.session_id){var e={size:vr(t.events),data:t.events,partitionKey:t.session_id,stream_key:t.stream_key};t.fullSnapshotExists=!1,"string"==typeof t.events[0]&&"fullsnapshot"==t.events[0]&&(t.fullSnapshotExists=!0),t.queue.addPackets(e,t.fullSnapshotExists),t.events=[]}},this.events=[],this.stream_key=null,this.session_id=null,this.record=e,this.rrwebRecord=gt,this.mutationRateLimiter=new jn(this.rrwebRecord,{onBlockedNode:function(e,t){var n="Too many mutations on node '".concat(e,"'. Rate limiting. This could be due to SVG animations or something similar");console.warn(n,t)}}),this.queue=new br(this),setInterval(this._emit.bind(this),2e3)}return e.prototype.start_recording=function(){var e=this;this.rrwebRecord({emit:function(t){var n=e.mutationRateLimiter.throttleMutations(t),r=n||t;r.type==he.FullSnapshot&&e.events.unshift("fullsnapshot"),e.events.push(r),function(e,t){if(e.type==he.Meta){var n=Fn.campaignParams(),r={type:he.Plugin,data:{plugin:"sitewiz/marketing@1",payload:n},timestamp:Date.now()};t.push(r)}}(r,e.events)},sampling:{mouseInteraction:{MouseUp:!1,MouseDown:!1,ContextMenu:!1,Focus:!1,Blur:!1,TouchStart:!1,TouchEnd:!1}},plugins:[Lt,Rt,_t,Pn]})},e}(),wr=new(function(){function e(){this.record=!1,this.compress=!0,this.stream_key="",this.funnel=!0;Math.random()>.3&&(this.record=!0),this.replay=new Sr(this.record)}return e.prototype.begin=function(e){var n=t();this.replay.set_keys(e,n[0]),this.replay.record=!0,this.replay.start_recording()},e.prototype.dom_loaded_handler=function(){var e=this;(null===document||void 0===document?void 0:document.addEventListener)&&("complete"===document.readyState?this.begin(this.stream_key):document.addEventListener("DOMContentLoaded",(function(){return e.begin(e.stream_key)})))},e.prototype.init=function(e,t){this.stream_key=e,t?this.begin(this.stream_key):window.addEventListener("load",this.dom_loaded_handler.bind(this),!0)},e}());window.sitewiz=wr,e.sitewiz=wr}({});
//# sourceMappingURL=main.js.map
